(this["webpackJsonpchat-app-frontend"]=this["webpackJsonpchat-app-frontend"]||[]).push([[0],{65:function(e,n,t){"use strict";t.r(n);var r=t(1),a=t(0),c=t(33),o=t.n(c),u=t(4),i=t.n(u),s=t(12),l=t(8),j=t(5),d=t(6),b=function(e){var n=e.register,t=Object(a.useState)(""),c=Object(l.a)(t,2),o=c[0],u=c[1],i=Object(a.useState)(""),s=Object(l.a)(i,2),j=s[0],d=s[1],b=Object(a.useState)(""),p=Object(l.a)(b,2),f=p[0],h=p[1];return Object(r.jsxs)("div",{children:[Object(r.jsx)("h3",{children:"No account? Sign up!"}),Object(r.jsxs)("form",{children:[Object(r.jsx)("div",{children:Object(r.jsx)("input",{value:o,onChange:function(e){u(e.target.value)},placeholder:"username"})}),Object(r.jsx)("div",{children:Object(r.jsx)("input",{type:"password",value:j,onChange:function(e){d(e.target.value)},placeholder:"password"})}),Object(r.jsx)("div",{children:Object(r.jsx)("input",{type:"password",value:f,onChange:function(e){h(e.target.value)},placeholder:"repeat password"})}),Object(r.jsx)("button",{onClick:function(e){e.preventDefault(),n({username:o,password:j}),console.log("after register")},type:"submit",children:"Sign up"})]})]})},p=function(e){var n=e.login,t=e.users,c=e.register,o=Object(a.useState)(""),u=Object(l.a)(o,2),i=u[0],s=u[1],j=Object(a.useState)(""),d=Object(l.a)(j,2),p=d[0],f=d[1];return Object(r.jsxs)("div",{children:[Object(r.jsx)("h3",{children:"Sign in!"}),Object(r.jsxs)("form",{children:[Object(r.jsx)("div",{children:Object(r.jsx)("input",{value:i,onChange:function(e){s(e.target.value)},placeholder:"username"})}),Object(r.jsx)("div",{children:Object(r.jsx)("input",{type:"password",value:p,onChange:function(e){f(e.target.value)},placeholder:"password"})}),Object(r.jsx)("button",{onClick:function(e){e.preventDefault();try{n(i,p)}catch(t){console.log("Wrong username or password")}},type:"submit",children:"Login"})]}),Object(r.jsx)(b,{login:n,users:t,register:c})]})},f=t(15);function h(){var e=Object(j.a)(["\n  background: black;\n  padding: 0.75em\n"]);return h=function(){return e},e}function g(){var e=Object(j.a)(["\n  padding: 0.25em;\n  position: absolute;\n  right: 1em;\n  font-size: 1em;\n  color: Azure;\n  font-weight: bold;\n"]);return g=function(){return e},e}function O(){var e=Object(j.a)(["\n  padding: 0.25em;\n  font-size: 1em;\n  color: Azure;\n  font-weight: bold;\n"]);return O=function(){return e},e}var v=Object(d.a)(f.b)(O()),x=Object(d.a)(f.b)(g()),m=d.a.div(h()),w=function(e){var n=e.user,t=e.logOut;return Object(r.jsxs)(m,{children:[Object(r.jsx)(v,{to:"/",children:"Home"}),Object(r.jsx)(v,{to:"/",children:"Users"}),n?Object(r.jsx)(x,{onClick:t,to:"/#",children:"Log out"}):Object(r.jsx)(x,{to:"/login",children:"Login"})]})},k=t(13),y=t.n(k),S="/api/messages",A=null,C={getAll:function(){return y.a.get(S).then((function(e){return e.data}))},send:function(){var e=Object(s.a)(i.a.mark((function e(n){var t,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:A}},e.next=3,y.a.post(S,n,t);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),remove:function(){var e=Object(s.a)(i.a.mark((function e(n){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:A}},e.next=3,y.a.delete("".concat(S,"/").concat(n),t);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),setToken:function(e){A="bearer ".concat(e)}};function z(){var e=Object(j.a)(["\n  margin: 1em;\n  color: Azure\n"]);return z=function(){return e},e}var I=d.a.div(z()),U=function(e){var n=e.content;return null!==e.user?Object(r.jsxs)(I,{children:["user: ",n]}):Object(r.jsxs)(I,{children:["anonymous: ",n]})};function D(){var e=Object(j.a)(["\n  color: Ivory;\n"]);return D=function(){return e},e}function E(){var e=Object(j.a)(["\ncolor: palevioletred;\nbackground: transparent;\nfont-size: 1em;\nborder: none;\nborder-bottom: solid PowderBlue;\n"]);return E=function(){return e},e}function J(){var e=Object(j.a)(["\nmin-height: 3em;\npadding: 0.5em;\ndisplay: flex;\nmargin: 0.5em;\nbackground: black;\ncolor: white;\nborder: none;\nborder-radius: 3px\n"]);return J=function(){return e},e}function B(){var e=Object(j.a)(["\n  margin: 1em;\n  display: flex;\n"]);return B=function(){return e},e}function L(){var e=Object(j.a)(["\n  background: Black;\n  position: relative;\n  right: 5em;\n  margin: 0.25em 4em;\n  padding: 1em 2em;\n  align-items: center;\n"]);return L=function(){return e},e}var N=d.a.div(L()),T=d.a.span(B()),H=d.a.textarea(J()),M=d.a.button(E()),P=d.a.h3(D()),W=function(e){var n=e.user,t=Object(a.useState)([]),c=Object(l.a)(t,2),o=c[0],u=c[1],i=Object(a.useState)(""),s=Object(l.a)(i,2),j=s[0],d=s[1];console.log(n),Object(a.useEffect)((function(){C.getAll().then((function(e){return u(e)}))}),[]);return Object(r.jsxs)("div",{children:[Object(r.jsxs)(N,{children:[Object(r.jsx)(P,{children:"Start Chatting!"}),o.map((function(e){return Object(r.jsx)("div",{children:Object(r.jsx)(U,{user:e.user,content:e.content})},e.id)}))]}),Object(r.jsxs)(T,{children:[Object(r.jsx)(H,{value:j,onChange:function(e){d(e.target.value)}}),Object(r.jsx)(M,{onClick:function(){console.log("user in sendMessage "+n);var e=null;e=null===n?{content:j,date:Date.now(),user:null}:{content:j,date:Date.now(),user:n},C.send(e).then((function(e){u(o.concat(e))})),d("")},children:"Send"})]})]})};function q(){var e=Object(j.a)(["\n  padding: 1em\n"]);return q=function(){return e},e}function F(){var e=Object(j.a)(["\n  background: Azure\n  padding: 1em\n  position: relative;\n  margin: 0.25em 4em;\n"]);return F=function(){return e},e}var G=d.a.div(F()),K=d.a.h1(q()),Q=function(e){var n=e.message;return null!==n?Object(r.jsx)(G,{children:Object(r.jsx)(K,{children:n})}):null},R={login:function(){var e=Object(s.a)(i.a.mark((function e(n){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.post("/api/login",n);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},V="/api/users",X={getAll:function(){return y.a.get(V).then((function(e){return e.data}))},create:function(){var e=Object(s.a)(i.a.mark((function e(n){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.post(V,n);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},Y=t(2);function Z(){var e=Object(j.a)(["\nposition: relative;\nwidth: 100%;\nalign-items: center;\npadding: 4em;\nbackground: SeaShell\n"]);return Z=function(){return e},e}var $=d.a.div(Z()),_=function(){var e=Object(a.useState)(null),n=Object(l.a)(e,2),t=n[0],c=n[1],o=Object(a.useState)([]),u=Object(l.a)(o,2),j=u[0],d=u[1],b=Object(Y.g)();Object(a.useEffect)((function(){X.getAll().then((function(e){return d(e)}))}),[]),Object(a.useEffect)((function(){var e=window.localStorage.getItem("loggedChatAppUser");if(e){var n=JSON.parse(e);c(n),console.log("setUser:"+n),C.setToken(n.token),console.log("logged in user: "+n.username)}}),[]);var f=function(){var e=Object(s.a)(i.a.mark((function e(n,t){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("login"),e.next=3,R.login({username:n,password:t});case 3:r=e.sent,window.localStorage.setItem("loggedChatAppUser",JSON.stringify(r)),C.setToken(r.token),c(r),b.push("/");case 8:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),h=function(){var e=Object(s.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.localStorage.removeItem("loggedChatAppUser"),c(null);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Object(s.a)(i.a.mark((function e(n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X.create(n);case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return console.log("user in App: "+t),Object(r.jsxs)("div",{children:[Object(r.jsx)(w,{user:t,logOut:h}),Object(r.jsx)(Q,{message:"hello"}),Object(r.jsx)($,{children:Object(r.jsxs)(Y.d,{children:[Object(r.jsx)(Y.b,{path:"/login",children:t?Object(r.jsx)(Y.a,{to:"/"}):Object(r.jsx)(p,{login:f,register:g,users:j})}),Object(r.jsx)(Y.b,{path:"/",children:Object(r.jsx)(W,{user:t})})]})})]})};o.a.render(Object(r.jsx)(f.a,{history:history,children:Object(r.jsx)(_,{})}),document.getElementById("root"))}},[[65,1,2]]]);
//# sourceMappingURL=main.d42077cb.chunk.js.map