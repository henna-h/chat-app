{"version":3,"sources":["components/Login.js","components/SignUp.js","components/Navbar.js","services/messages.js","components/Message.js","components/ChatBox.js","components/Notification.js","services/login.js","services/users.js","App.js","index.js"],"names":["FormContainer","styled","div","Form","form","FormButton","button","FormInput","input","H2","h2","Login","login","useState","username","setUsername","password","setPassword","value","onChange","event","target","placeholder","type","onClick","preventDefault","href","SignUp","register","password1","setPassword1","password2","setPassword2","NavLink","Link","NavLinkRight","Nav","Navbar","user","logOut","to","className","baseUrl","token","getAll","axios","get","then","response","data","send","newObject","a","config","headers","Authorization","post","remove","id","delete","setToken","newToken","MessageInfoDiv","MessageInfo","span","Date","p","MessageBubble","Triangle","MessageText","Message","date","content","moment","format","MessageBox","Messages","MessageSpan","Textarea","textarea","MessageButton","ChatBox","messages","setMessages","newContent","setNewContent","messagesEndRef","useRef","useEffect","messageService","current","scrollIntoView","behavior","scrollToBottom","map","message","ref","replace","length","now","concat","Noti","Notification","credentials","create","Wrapper","App","setUser","users","setUsers","notification","setNotification","history","useHistory","userService","loggedUserJSON","window","localStorage","getItem","JSON","parse","loginService","setItem","stringify","push","setTimeout","removeItem","includes","newUser","path","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.c57b543d.chunk.js","sourcesContent":["import React, { useState } from 'react'\nimport PropTypes from 'prop-types'\nimport styled from 'styled-components'\n\n\nconst FormContainer = styled.div`\nposition: relative;\nmargin-top: 4em;\nmargin-left: 37%;\npadding: 1em 2em;\nalign-items: center;\ndisplay: block;\n`\n\nconst Form = styled.form`\n  display: inline-block;\n  align-items: center;\n  text-align: center;\n`\n\nconst FormButton = styled.button`\n  font-size: 1em;\n  font: 14px/22px \"Lato\", Arial, sans-serif;\n  margin: 1em;\n  padding: 0.25em 1em;\n  border-radius: 5px;\n  border: 2px solid;\n  color: white;\n  background: black;\n  float: center;\n  &:hover ${FormButton} {\n    color: PowderBlue;\n  }\n`\n\nconst FormInput = styled.input`\n  padding: 0.5em;\n  margin: 0.5em;\n  background: white;\n  border: none;\n  border-radius: 3px;\n  box-shadow: inset 0 0 1.7px;\n`\n\nconst H2 = styled.h2`\n  font: \"Lato\", Arial, sans-serif;\n  float: center;\n`\n\n\nconst Login = ({ login }) => {\n    const [username, setUsername] = useState('')\n    const [password, setPassword] = useState('')\n\n    const handleUsernameChange = (event) => {\n      setUsername(event.target.value)\n    }\n\n    const handlePasswordChange = (event) => {\n      setPassword(event.target.value)\n    }\n\n    const loginUser = (event) => {\n      event.preventDefault()\n      login(username, password)\n    }\n\n    return (\n      <FormContainer>\n        <Form>\n        <H2>Sign in!</H2>\n          <div>\n            <FormInput value={username} onChange={handleUsernameChange} placeholder='username' />\n          </div>\n          <div>\n            <FormInput type='password' value={password} onChange={handlePasswordChange} placeholder='password' />\n          </div>\n            <FormButton onClick={loginUser} type='submit'>Login</FormButton>\n          <div><a href=\"/#/signup\">No account? Sign up!</a></div>\n        </Form>\n      </FormContainer>\n    )\n}\n\nLogin.propTypes = {\n  users: PropTypes.array.isRequired,\n  login: PropTypes.func.isRequired,\n  register: PropTypes.func.isRequired,\n}\n\nexport default Login","import React, { useState } from 'react'\nimport PropTypes from 'prop-types'\nimport styled from 'styled-components'\n\n\nconst FormContainer = styled.div`\nposition: relative;\nmargin-top: 4em;\nmargin-left: 37%;\npadding: 1em 2em;\nalign-items: center;\ndisplay: block;\n`\n\nconst Form = styled.form`\n  display: inline-block;\n  align-items: center;\n  text-align: center;\n`\n\nconst FormButton = styled.button`\n  font-size: 1em;\n  font: 14px/22px \"Lato\", Arial, sans-serif;\n  margin: 1em;\n  padding: 0.25em 1em;\n  border-radius: 5px;\n  border: 2px solid;\n  color: white;\n  background: black;\n  float: center;\n  &:hover ${FormButton} {\n    color: PowderBlue;\n  }\n`\n\nconst FormInput = styled.input`\n  padding: 0.5em;\n  margin: 0.5em;\n  background: white;\n  border: none;\n  border-radius: 3px;\n  box-shadow: inset 0 0 1.7px;\n`\n\nconst H2 = styled.h2`\n  font: \"Lato\", Arial, sans-serif;\n  float: center;\n`\n\n\nconst SignUp = ({ register }) => {\n  const [username, setUsername] = useState('')\n  const [password1, setPassword1] = useState('')\n  const [password2, setPassword2] = useState('')\n\n  const handleNewUsernameChange = (event) => {\n    setUsername(event.target.value)\n  }\n\n  const handlePassword1Change = (event) => {\n    setPassword1(event.target.value)\n  }\n\n  const handlePassword2Change = (event) => {\n    setPassword2(event.target.value)\n  }\n\n  const registerAndLogin = (event) => {\n    event.preventDefault()\n\n      const user = {\n        username: username,\n        password1: password1,\n        password2: password2,\n      }\n\n      register(user)\n\n  }\n\n  return(\n    <div>\n      <FormContainer>\n        <Form>\n          <H2>Create an account!</H2>\n          <div>\n            <FormInput value={username} onChange={handleNewUsernameChange} placeholder='username' />\n          </div>\n          <div>\n            <FormInput type='password' value={password1} onChange={handlePassword1Change} placeholder='password' />\n          </div>\n          <div>\n            <FormInput type='password' value={password2} onChange={handlePassword2Change} placeholder='repeat password' />\n          </div>\n          <FormButton onClick={registerAndLogin} type='submit'>Sign up</FormButton>\n        </Form>\n      </FormContainer>\n    </div>\n  )\n}\n\nSignUp.propTypes = {\n  //users: PropTypes.array.isRequired,\n  login: PropTypes.func.isRequired,\n  register: PropTypes.func.isRequired,\n}\n\nexport default SignUp","import React from 'react'\nimport PropTypes from 'prop-types'\nimport styled from 'styled-components'\nimport 'semantic-ui-css/semantic.min.css'\n//import { Icon } from 'semantic-ui-react'\nimport {\n  Link\n} from \"react-router-dom\"\n\nconst NavLink = styled(Link)`\n  padding: 0.25em;\n  color: white;\n  &:hover ${NavLink} {\n    color: PowderBlue;\n  };\n` \n\nconst NavLinkRight = styled(Link)`\n  padding: 0.25em;\n  position: absolute;\n  font: 14px/22px \"Lato\", Arial, sans-serif;\n  right: 1em;\n  font-size: 1em;\n  color: white;\n  font-weight: bold;\n  &:hover ${NavLinkRight} {\n    color: PowderBlue;\n  };\n`\n\nconst Nav = styled.div`\n  width: 100%;\n  background: black;\n  padding: 0.75em;\n  box-shadow: 0px 0px 6px;\n`\n\n\nconst Navbar = ({ user, logOut }) => {\n\n\n  return (\n    <Nav>\n      <NavLink to=\"/\"> <i className=\"big white home icon\"/> </NavLink>\n      {user\n        ? <NavLinkRight onClick={logOut} to=\"/#\"><i className=\"big white sign-out icon\"/></NavLinkRight>\n        : <NavLinkRight to=\"/login\"><i className=\"big white sign-in icon\"/></NavLinkRight>\n      }\n    </Nav>\n  )\n}\n\nNavbar.propTypes = {\n  user: PropTypes.object.isRequired,\n  logOut: PropTypes.func.isRequired,\n}\n\nexport default Navbar","import axios from 'axios'\nconst baseUrl = '/api/messages'\n\nlet token = null\n\nconst setToken = newToken => {\n  token = `bearer ${newToken}`\n}\n\nconst getAll = () => {\n  const request = axios.get(baseUrl)\n  return request.then(response => response.data)\n}\n\nconst send = async newObject => {\n  const config = {\n    headers: { Authorization: token },\n  }\n\n  const response = await axios.post(baseUrl, newObject, config)\n  return response.data\n}\n\n\nconst remove = async (id) => {\n  const config = {\n    headers: { Authorization: token },\n  }\n  await axios.delete(`${baseUrl}/${id}`, config)\n}\n\n\nexport default { getAll, send, remove, setToken }","import React from 'react'\nimport PropTypes from 'prop-types'\nimport styled from 'styled-components'\nimport moment from 'moment';\n\nconst MessageInfoDiv = styled.div`\n  margin-bottom: 0.25em;\n  width: 25em;\n  padding-left: 10px;\n  padding-right: 30px;\n`\nconst MessageInfo = styled.span`\n  color: Black;\n  font: 14px \"Lato\", Arial, sans-serif;\n`\n\nconst Date = styled.p`\n  float: right;\n`\n\nconst MessageBubble = styled.div`\n  margin-bottom: 1em;\n`\n\nconst Triangle = styled.div`\n  width: 0; \n  height: 0;\n  margin-left: 5%;\n  border-left: 10px solid transparent;\n  border-right: 10px solid transparent;\n  border-bottom: 10px solid PowderBlue;\n`\n\nconst MessageText = styled.div`\n  width: 25em;\n  border: none;\n  padding: 10px 20px;\n  font: 14px/22px \"Lato\", Arial, sans-serif;\n  margin-bottom: 10px;\n  border-radius: 5px;\n  box-shadow: 0 5px 5px -5px;\n  resize: none;\n  background: PowderBlue;\n`\n\n\nconst Message = ({ date, content, user }) => {\n\n  var username = \"anonymous\";\n  if(user && user != null){\n    username = user.username;\n  }\n\n  return(\n      <div>\n      <MessageInfoDiv>\n        <MessageInfo>{username}<Date>{moment(date).format('lll')}</Date></MessageInfo>\n      </MessageInfoDiv>\n      <MessageBubble>\n        <Triangle/>\n        <MessageText>{content}</MessageText>\n      </MessageBubble>\n    </div>\n  )\n}\n\nMessage.propTypes = {\n    content: PropTypes.string.isRequired,\n    user: PropTypes.object.isRequired,\n    date: PropTypes.object.isRequired,\n  }\n\nexport default Message","import React, { useState, useEffect, useRef } from 'react'\nimport PropTypes from 'prop-types'\nimport styled from 'styled-components'\nimport messageService from '../services/messages'\nimport Message from './Message'\n\nconst MessageBox = styled.div`\n  background: White;\n  width: 30em;\n  height: 38em;\n  position: relative;\n  margin-top: 4em;\n  margin-left: auto;\n  margin-right: auto;\n  margin-bottom: 5em;\n  padding: 1em 2em;\n  align-items: center;\n  display: block;\n  border: 1.5px solid Grey;\n  border-radius: 5px;\n`\n\nconst Messages = styled.div`\n  overflow-y: scroll;\n  width: 27em;\n  height: 33em;\n  padding-bottom: 2em;\n  padding-right: 1.5em;\n`\n\nconst MessageSpan = styled.span`\n  width: 25em;\n  position: absolute;\n  bottom: 0.5em;\n  display:inline-flex;\n`\n\nconst Textarea = styled.textarea`\n  width: 21em;\n  min-height: 4.5em;\n  border: none;\n  padding: 10px 20px;\n  font: 14px/22px \"Lato\", Arial, sans-serif;\n  margin-bottom: 10px;\n  border-radius: 5px;\n  resize: none;\n  box-shadow: inset 0 0 1.7px;\n`\n\nconst MessageButton = styled.button`\n  height: 4.5em;\n  color: Black;\n  background: PowderBlue;;\n  font-size: 1em;\n  padding: 1em;\n  border: none;\n  border-radius: 5px;\n  &:hover ${MessageButton} {\n    background: DarkCyan;\n  }\n  }\n`\n\nconst ChatBox = ({ user }) => {\n  const [messages, setMessages] = useState([])\n  const [newContent, setNewContent] = useState('')\n\n  const messagesEndRef = useRef(null)\n\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" })\n  }\n\n  useEffect(() => {\n    messageService.getAll().then(messages =>\n      setMessages( messages )\n    )\n  }, [])\n\n  useEffect(() => {\n    scrollToBottom()\n  }, [messages]);\n\n\n  const handleMessageChange = (event) => {\n    setNewContent(event.target.value)\n  }\n\n  const sendMessage = () => {\n\n    let message = null\n\n    if(newContent && newContent != null && newContent.replace(/\\s/g, '').length > 0){\n      if(user === null){\n        message = {\n          content: newContent,\n          date: Date.now(),\n          user: null\n        }\n      } else {\n        message = {\n          content: newContent,\n          date: Date.now(),\n          user: user\n        }\n      }\n      messageService.send(message)\n      setMessages(messages.concat(message))\n    }\n\n    setNewContent('')\n  }\n  \n  return (\n    <div>\n      <MessageBox>\n        <Messages>\n        {messages.map(message => (\n          <div key={message.id}>\n            <Message date={message.date} user={message.user} content={message.content} />\n          </div>\n        ))}\n        <div ref={messagesEndRef} />\n        </Messages>\n      <MessageSpan>\n        <Textarea value={newContent} onChange={handleMessageChange}></Textarea>\n        <MessageButton onClick={sendMessage}>Send</MessageButton>\n      </MessageSpan>\n      </MessageBox>\n    </div>\n  )\n}\n\nChatBox.propTypes = {\n  user: PropTypes.func.isRequired,\n}\n\nexport default ChatBox","import React from 'react'\nimport PropTypes from 'prop-types'\nimport styled from 'styled-components'\n\nconst Noti = styled.div`\n  border: 1px solid DarkCyan;\n  background-color: PowderBlue;\n  color: Black;\n  font: 14px/22px \"Lato\", Arial, sans-serif;\n  transition:0.5s;\n  cursor:pointer;\n  padding: 0.25em\n`\n\nconst Notification = ({ message }) => {\n  if(message !== null){\n    return (\n      <Noti>{message}</Noti>\n    )\n  }\n  \n  return null\n}\n\nNotification.propTypes = {\n  message: PropTypes.string.isRequired,\n}\n\nexport default Notification","import axios from 'axios'\nconst baseUrl = '/api/login'\n\nconst login = async credentials => {\n  const response = await axios.post(baseUrl, credentials)\n  return response.data\n}\n\nexport default { login }","import axios from 'axios'\nconst baseUrl = '/api/users'\n\nconst getAll = () => {\n    const request = axios.get(baseUrl)\n    return request.then(response => response.data)\n}\n\nconst create = async newObject => {\n  const response = await axios.post(baseUrl, newObject)\n  return response.data\n}\n\nexport default { getAll, create }","import React, { useState, useEffect } from 'react'\nimport styled from 'styled-components'\nimport Login from './components/Login'\nimport SignUp from './components/SignUp'\nimport Navbar from './components/Navbar'\nimport ChatBox from './components/ChatBox'\nimport Notification from './components/Notification'\nimport loginService from './services/login'\nimport messageService from './services/messages'\nimport userService from './services/users'\nimport {\n  Switch,\n  Route,\n  Redirect,\n  useHistory\n} from \"react-router-dom\"\n\nconst Wrapper = styled.div`\n  width: 100vw;\n  min-height: 100vh;\n  background: WhiteSmoke;\n`\n\nconst App = () => {\n  const [user, setUser] = useState(null)\n  const [users, setUsers] = useState([])\n  const [notification, setNotification] = useState(null)\n  const history = useHistory()\n\n  useEffect(() => {\n    userService.getAll().then(users =>\n      setUsers( users )\n    )\n  }, [])\n\n  useEffect(() => {\n    const loggedUserJSON = window.localStorage.getItem('loggedChatAppUser')\n    if (loggedUserJSON) {\n      const user = JSON.parse(loggedUserJSON)\n      setUser(user)\n      messageService.setToken(user.token)\n    }\n  }, [])\n\n\n  const login = async (username, password) => {\n\n    try{\n      const user = await loginService.login({\n        username, password,\n      })\n    \n      window.localStorage.setItem(\n        'loggedChatAppUser', JSON.stringify(user)\n      )\n    \n      messageService.setToken(user.token)\n      setUser(user)\n      history.push('/')\n      setNotification(\"Hi \" + user.username + \"!\")\n      setTimeout(() => {setNotification(null)}, 5*1000)\n    } catch (exception) {\n      setNotification('Wrong username or password')\n      setTimeout(() => {setNotification(null)}, 5*1000)\n    }\n  }\n\n  const logOut = async () => {\n    window.localStorage.removeItem('loggedChatAppUser')\n    setUser(null)\n    setNotification(\"Logged out!\")\n    setTimeout(() => {setNotification(null)}, 3*1000)\n  }\n\n  const register = async (user) => {\n\n    const usernames = users.map(user => user.username)\n\n    if(usernames.includes(user.username)){\n      setNotification('Username is already taken')\n    } else if(user.username.length < 3 || user.password1.length < 3){\n      setNotification('Username and password must be at least 3 characters long')\n    } else if(user.password1 !== user.password2){\n      setNotification('Make sure password fields match!')\n    } else {\n\n      setTimeout(() => {setNotification(null)})\n\n      const newUser = {\n        username: user.username,\n        password: user.password1,\n      }\n\n      await userService.create(newUser)\n\n      login(newUser.username, newUser.password) \n\n    }\n  }\n\n  return (\n    <div>\n      <Wrapper>\n      <Navbar user={user} logOut={logOut} />\n      <Notification message={notification} />\n        <Switch>\n        <Route path=\"/login\">\n          {user \n            ? <Redirect to=\"/\" />\n            : <Login login={login} register={register} users={users} /> \n          }\n          </Route>\n          <Route path=\"/signup\">\n          {user \n            ? <Redirect to=\"/\" />\n            : <SignUp login={login} register={register} users={users} /> \n          }\n          </Route>\n          <Route path=\"/\">\n            <ChatBox user={user} />\n          </Route>\n        </Switch>\n      </Wrapper>\n    </div>\n  )\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport {\n  HashRouter\n} from \"react-router-dom\"\n\nReactDOM.render(\n<HashRouter history={history}>\n  <App />\n</HashRouter>,\ndocument.getElementById('root')\n)"],"sourceRoot":""}