{"version":3,"sources":["components/SignUp.js","components/Login.js","components/Navbar.js","services/messages.js","components/Message.js","components/ChatBox.js","components/Notification.js","services/login.js","services/users.js","App.js","index.js"],"names":["Form","styled","form","FormButton","button","FormInput","input","SignUp","register","useState","username","setUsername","password1","setPassword1","password2","setPassword2","value","onChange","event","target","placeholder","type","onClick","preventDefault","FormContainer","div","Login","login","users","password","setPassword","NavLink","Link","NavLinkRight","Nav","Navbar","user","logOut","to","baseUrl","token","getAll","axios","get","then","response","data","send","newObject","a","config","headers","Authorization","post","remove","id","delete","setToken","newToken","MessageUser","MessageText","Message","content","console","log","MessageBox","Messages","MessageSpan","span","Textarea","textarea","MessageButton","Title","h3","ChatBox","messages","setMessages","newContent","setNewContent","useEffect","messageService","map","message","date","Date","now","concat","Noti","NotiText","h1","Notification","credentials","create","Wrapper","App","setUser","setUsers","notification","setNotification","history","useHistory","userService","loggedUserJSON","window","localStorage","getItem","JSON","parse","loginService","setItem","stringify","push","setTimeout","removeItem","includes","length","newUser","path","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.eef9645c.chunk.js","sourcesContent":["import React, { useState } from 'react'\nimport PropTypes from 'prop-types'\nimport styled from 'styled-components'\n\nconst Form = styled.form`\n  position: relative;\n  margin-left: auto;\n  margin-right: auto;\n  align-items: center;\n`\n\nconst FormButton = styled.button`\n  font-size: 1em;\n  margin: 1em;\n  padding: 0.25em 1em;\n  border-radius: 3px;\n  border: 2px solid;\n  color: white;\n  background: black;\n`;\n\nconst FormInput = styled.input`\n  padding: 0.5em;\n  margin: 0.5em;\n  background: white;\n  border: none;\n  border-radius: 3px;\n`;\n\n\nconst SignUp = ({ register }) => {\n  const [username, setUsername] = useState('')\n  const [password1, setPassword1] = useState('')\n  const [password2, setPassword2] = useState('')\n\n  const handleNewUsernameChange = (event) => {\n    setUsername(event.target.value)\n  }\n\n  const handlePassword1Change = (event) => {\n    setPassword1(event.target.value)\n  }\n\n  const handlePassword2Change = (event) => {\n    setPassword2(event.target.value)\n  }\n\n  const registerAndLogin = (event) => {\n    event.preventDefault()\n\n      const user = {\n        username: username,\n        password1: password1,\n        password2: password2,\n      }\n\n      register(user)\n\n  }\n\n  return(\n    <div>\n      <Form>\n      <h3>No account? Sign up!</h3>\n        <div>\n          <FormInput value={username} onChange={handleNewUsernameChange} placeholder='username' />\n        </div>\n        <div>\n          <FormInput type='password' value={password1} onChange={handlePassword1Change} placeholder='password' />\n        </div>\n        <div>\n          <FormInput type='password' value={password2} onChange={handlePassword2Change} placeholder='repeat password' />\n        </div>\n        <FormButton onClick={registerAndLogin} type='submit'>Sign up</FormButton>\n      </Form>\n    </div>\n  )\n}\n\nSignUp.propTypes = {\n  //users: PropTypes.array.isRequired,\n  login: PropTypes.func.isRequired,\n  register: PropTypes.func.isRequired,\n}\n\nexport default SignUp","import React, { useState } from 'react'\nimport PropTypes from 'prop-types'\nimport SignUp from './SignUp'\nimport styled from 'styled-components'\n\n\nconst FormContainer = styled.div`\n  margin-left: 35%;\n  margin-right: 35%;\n  align-items: center;\n`\n\nconst Form = styled.form`\n  position: relative;\n  margin-left: auto;\n  margin-right: auto;\n  align-items: center;\n`\n\nconst FormButton = styled.button`\n  font-size: 1em;\n  margin: 1em;\n  padding: 0.25em 1em;\n  border-radius: 3px;\n  border: 2px solid;\n  color: white;\n  background: black;\n`;\n\nconst FormInput = styled.input`\n  padding: 0.5em;\n  margin: 0.5em;\n  background: white;\n  border: none;\n  border-radius: 3px;\n`;\n\n\nconst Login = ({ login, users, register }) => {\n    const [username, setUsername] = useState('')\n    const [password, setPassword] = useState('')\n\n    const handleUsernameChange = (event) => {\n      setUsername(event.target.value)\n    }\n\n    const handlePasswordChange = (event) => {\n      setPassword(event.target.value)\n    }\n\n    const loginUser = (event) => {\n      event.preventDefault()\n      login(username, password)\n    }\n\n    return (\n      <FormContainer>\n        <Form>\n        <h3>Sign in!</h3>\n          <div>\n            <FormInput value={username} onChange={handleUsernameChange} placeholder='username' />\n          </div>\n          <div>\n            <FormInput type='password' value={password} onChange={handlePasswordChange} placeholder='password' />\n          </div>\n            <FormButton onClick={loginUser} type='submit'>Login</FormButton>\n        </Form>\n\n        <SignUp login={login} users={users} register={register} />\n      </FormContainer>\n    )\n}\n\nLogin.propTypes = {\n  users: PropTypes.array.isRequired,\n  login: PropTypes.func.isRequired,\n  register: PropTypes.func.isRequired,\n}\n\nexport default Login","import React from 'react'\nimport PropTypes from 'prop-types'\nimport styled from 'styled-components'\nimport {\n  Link\n} from \"react-router-dom\"\n\nconst NavLink = styled(Link)`\n  padding: 0.25em;\n  font-size: 1em;\n  color: white;\n  font-weight: bold;\n`\n\nconst NavLinkRight = styled(Link)`\n  padding: 0.25em;\n  position: absolute;\n  right: 1em;\n  font-size: 1em;\n  color: white;\n  font-weight: bold;\n`\n\nconst Nav = styled.div`\n  background: black;\n  padding: 0.75em\n`\n\nconst Navbar = ({ user, logOut }) => {\n\n\n  return (\n    <Nav>\n      <NavLink to=\"/\">Home</NavLink>\n      {user\n        ? <NavLinkRight onClick={logOut} to=\"/#\">Log out</NavLinkRight>\n        : <NavLinkRight to=\"/login\">Login</NavLinkRight>\n      }\n    </Nav>\n  )\n}\n\nNavbar.propTypes = {\n  user: PropTypes.object.isRequired,\n  logOut: PropTypes.func.isRequired,\n}\n\nexport default Navbar","import axios from 'axios'\nconst baseUrl = '/api/messages'\n\nlet token = null\n\nconst setToken = newToken => {\n  token = `bearer ${newToken}`\n}\n\nconst getAll = () => {\n  const request = axios.get(baseUrl)\n  return request.then(response => response.data)\n}\n\nconst send = async newObject => {\n  const config = {\n    headers: { Authorization: token },\n  }\n\n  const response = await axios.post(baseUrl, newObject, config)\n  return response.data\n}\n\n\nconst remove = async (id) => {\n  const config = {\n    headers: { Authorization: token },\n  }\n  await axios.delete(`${baseUrl}/${id}`, config)\n}\n\n\nexport default { getAll, send, remove, setToken }","import React from 'react'\nimport PropTypes from 'prop-types'\nimport styled from 'styled-components'\n\nconst MessageUser = styled.div`\n  margin: 1em;\n  color: PowderBlue;\n  border-style: none none solid none;\n`\n\nconst MessageText = styled.div`\n  margin: 1em;\n  color: white;\n`\n\nconst Message = ({ content, user }) => {\n    if(user && user !== null){\n        console.log(user.username)\n        return(\n           <div>\n            <MessageUser>{user.username}:</MessageUser>\n            <MessageText>{content}</MessageText>\n          </div>\n        )\n    } else {\n        return(\n        <div>\n          <MessageUser>anonymous:</MessageUser>\n          <MessageText>{content}</MessageText>\n        </div>\n        )\n    }\n\n}\n\nMessage.propTypes = {\n    content: PropTypes.string.isRequired,\n    user: PropTypes.object.isRequired,\n    //time: PropTypes.object.isRequired,\n  }\n\nexport default Message","import React, { useState, useEffect } from 'react'\nimport PropTypes from 'prop-types'\nimport styled from 'styled-components'\nimport messageService from '../services/messages'\nimport Message from './Message'\n\nconst MessageBox = styled.div`\n  background: Black;\n  width: 20em;\n  height: 35em;\n  position: relative;\n  right: 5em;\n  margin-left: auto;\n  margin-right: auto;\n  padding: 1em 2em;\n  align-items: center;\n`\n\nconst Messages = styled.div`\n  overflow: scroll;\n  width: 20em;\n  height: 25em;\n  padding-bottom: 1em;\n`\n\nconst MessageSpan = styled.span`\n  position: absolute;\n  bottom: 0.5em;\n  display:inline-flex;\n`\n\nconst Textarea = styled.textarea`\n  width: 18em;\n  height: 5em;\n  background: white;\n  color: black;\n  overflow: scroll;\n`\n\nconst MessageButton = styled.button`\n  color: Black;\n  background: PowderBlue;;\n  font-size: 1em;\n  padding: 1em;\n  border: none;\n`\n\nconst Title = styled.h3`\n  color: white;\n  \n`\n\nconst ChatBox = ({ user }) => {\n  const [messages, setMessages] = useState([])\n  const [newContent, setNewContent] = useState('')\n\n  console.log(user)\n\n  useEffect(() => {\n    messageService.getAll().then(messages =>\n      setMessages( messages )\n    )\n  }, [])\n\n  const handleMessageChange = (event) => {\n    setNewContent(event.target.value)\n  }\n\n  const sendMessage = () => {\n\n    let message = null\n\n    if(user === null){\n      message = {\n        content: newContent,\n        date: Date.now(),\n        user: null\n      }\n    } else {\n      message = {\n        content: newContent,\n        date: Date.now(),\n        user: user\n      }\n    }\n    messageService.send(message)\n    setMessages(messages.concat(message))\n    setNewContent('')\n  }\n  \n  return (\n    <div>\n      <MessageBox>\n        <Title>Start Chatting!</Title>\n        <Messages>\n        {messages.map(message => (\n          <div key={message.id}>\n            <Message user={message.user} content={message.content} />\n          </div>\n        ))}\n        </Messages>\n      <MessageSpan>\n        <Textarea value={newContent} onChange={handleMessageChange}></Textarea>\n        <MessageButton onClick={sendMessage}>Send</MessageButton>\n      </MessageSpan>\n      </MessageBox>\n    </div>\n  )\n}\n\nChatBox.propTypes = {\n  user: PropTypes.func.isRequired,\n}\n\nexport default ChatBox","import React from 'react'\nimport PropTypes from 'prop-types'\nimport styled from 'styled-components'\n\nconst Noti = styled.div`\n  background: white\n  padding: 1em\n  position: relative;\n  margin: 0.25em 1em;\n`\n\nconst NotiText = styled.h1`\n  padding: 0.25em\n`\n\nconst Notification = ({ message }) => {\n  if(message !== null){\n    return (\n      <Noti>\n          <NotiText>{message}</NotiText>\n      </Noti>\n    )\n  }\n  \n  return null\n}\n\nNotification.propTypes = {\n  message: PropTypes.string.isRequired,\n}\n\nexport default Notification","import axios from 'axios'\nconst baseUrl = '/api/login'\n\nconst login = async credentials => {\n  const response = await axios.post(baseUrl, credentials)\n  return response.data\n}\n\nexport default { login }","import axios from 'axios'\nconst baseUrl = '/api/users'\n\nconst getAll = () => {\n    const request = axios.get(baseUrl)\n    return request.then(response => response.data)\n}\n\nconst create = async newObject => {\n  const response = await axios.post(baseUrl, newObject)\n  return response.data\n}\n\nexport default { getAll, create }","import React, { useState, useEffect } from 'react'\nimport styled from 'styled-components'\nimport Login from './components/Login'\nimport Navbar from './components/Navbar'\nimport ChatBox from './components/ChatBox'\nimport Notification from './components/Notification'\nimport loginService from './services/login'\nimport messageService from './services/messages'\nimport userService from './services/users'\nimport {\n  Switch,\n  Route,\n  Redirect,\n  useHistory\n} from \"react-router-dom\"\n\nconst Wrapper = styled.div`\nposition: relative;\nwidth: 100%;\nheight: 100%;\nalign-items: center;\npadding: 4em;\nbackground: SeaShell\n`\n\nconst App = () => {\n  const [user, setUser] = useState(null)\n  const [users, setUsers] = useState([])\n  const [notification, setNotification] = useState(null)\n  const history = useHistory()\n\n  useEffect(() => {\n    userService.getAll().then(users =>\n      setUsers( users )\n    )\n  }, [])\n\n  useEffect(() => {\n    const loggedUserJSON = window.localStorage.getItem('loggedChatAppUser')\n    if (loggedUserJSON) {\n      const user = JSON.parse(loggedUserJSON)\n      setUser(user)\n      messageService.setToken(user.token)\n    }\n  }, [])\n\n\n  const login = async (username, password) => {\n\n    try{\n      const user = await loginService.login({\n        username, password,\n      })\n    \n      window.localStorage.setItem(\n        'loggedChatAppUser', JSON.stringify(user)\n      )\n    \n      messageService.setToken(user.token)\n      setUser(user)\n      history.push('/')\n      setNotification(\"Hi \" + user.username + \"!\")\n      setTimeout(() => {setNotification(null)}, 5*1000)\n    } catch (exception) {\n      setNotification('Wrong username or password')\n      setTimeout(() => {setNotification(null)}, 5*1000)\n    }\n  }\n\n  const logOut = async () => {\n    window.localStorage.removeItem('loggedChatAppUser')\n    setUser(null)\n    setNotification(\"Logged out!\")\n    setTimeout(() => {setNotification(null)}, 3*1000)\n  }\n\n  const register = async (user) => {\n\n    const usernames = users.map(user => user.username)\n\n    if(usernames.includes(user.username)){\n      setNotification('Username is already taken')\n    } else if(user.username.length < 3 || user.password1.length < 3){\n      setNotification('Username and password must be at least 3 characters long')\n    } else if(user.password1 !== user.password2){\n      setNotification('Make sure password fields match!')\n    } else {\n\n      setTimeout(() => {setNotification(null)})\n\n      const newUser = {\n        username: user.username,\n        password: user.password1,\n      }\n\n      await userService.create(newUser)\n\n      login(newUser.username, newUser.password) \n\n    }\n  }\n\n  return (\n    <div>\n      <Navbar user={user} logOut={logOut} />\n      <Notification message={notification} />\n      <Wrapper>\n        <Switch>\n        <Route path=\"/login\">\n          {user \n            ? <Redirect to=\"/\" />\n            : <Login login={login} register={register} users={users} /> \n          }\n          </Route>\n          <Route path=\"/\">\n            <ChatBox user={user} />\n          </Route>\n        </Switch>\n      </Wrapper>\n    </div>\n  )\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport {\n  HashRouter\n} from \"react-router-dom\"\n\nReactDOM.render(\n<HashRouter history={history}>\n  <App />\n</HashRouter>,\ndocument.getElementById('root')\n)"],"sourceRoot":""}