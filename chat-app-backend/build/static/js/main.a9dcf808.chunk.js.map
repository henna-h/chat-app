{"version":3,"sources":["components/SignUp.js","components/Login.js","components/Navbar.js","services/messages.js","components/message.js","components/ChatBox.js","components/Notification.js","services/login.js","services/users.js","App.js","index.js"],"names":["SignUp","register","useState","username","setUsername","password1","setPassword1","password2","setPassword2","value","onChange","event","target","placeholder","type","onClick","preventDefault","password","console","log","Login","login","users","setPassword","exception","NavLink","styled","Link","NavLinkRight","Nav","div","Navbar","user","logOut","to","baseUrl","token","getAll","axios","get","then","response","data","send","newObject","a","config","headers","Authorization","post","remove","id","delete","setToken","newToken","MessageText","Message","content","MessageBox","MessageSpan","span","Textarea","textarea","MessageButton","button","Title","h3","ChatBox","messages","setMessages","newContent","setNewContent","useEffect","messageService","map","message","date","Date","now","concat","Noti","NotiText","h1","Notification","credentials","create","Wrapper","App","setUser","setUsers","history","useHistory","userService","loggedUserJSON","window","localStorage","getItem","JSON","parse","loginService","setItem","stringify","push","removeItem","path","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.a9dcf808.chunk.js","sourcesContent":["import React, { useState } from 'react'\nimport PropTypes from 'prop-types'\n\nconst SignUp = ({ register }) => {\n  const [username, setUsername] = useState('')\n  const [password1, setPassword1] = useState('')\n  const [password2, setPassword2] = useState('')\n\n  const handleNewUsernameChange = (event) => {\n    setUsername(event.target.value)\n  }\n\n  const handlePassword1Change = (event) => {\n    setPassword1(event.target.value)\n  }\n\n  const handlePassword2Change = (event) => {\n    setPassword2(event.target.value)\n  }\n\n  const registerAndLogin = (event) => {\n    event.preventDefault()\n    /*\n\n    if(password1 !== password2){\n      return console.log('Make sure password fields match!')\n    }\n\n    if(username.length < 3 || password1.length < 3){\n      return console.log('Username and password must be at least 3 characters long')\n    }\n\n    const usernames = users.map(user => user.username)\n\n    if(usernames.includes(username)){\n      return console.log('Username is already taken')\n    }\n    */\n\n    const user = {\n      username: username,\n      password: password1,\n    }\n\n    register(user)\n    console.log('after register')\n    \n    //login(username, password1)\n\n  }\n\n  return(\n    <div>\n      <h3>No account? Sign up!</h3>\n      <form>\n        <div>\n          <input value={username} onChange={handleNewUsernameChange} placeholder='username' />\n        </div>\n        <div>\n          <input type='password' value={password1} onChange={handlePassword1Change} placeholder='password' />\n        </div>\n        <div>\n          <input type='password' value={password2} onChange={handlePassword2Change} placeholder='repeat password' />\n        </div>\n        <button onClick={registerAndLogin} type='submit'>Sign up</button>\n      </form>\n    </div>\n  )\n}\n\nSignUp.propTypes = {\n  users: PropTypes.array.isRequired,\n  login: PropTypes.func.isRequired,\n  register: PropTypes.func.isRequired,\n}\n\nexport default SignUp","import React, { useState } from 'react'\nimport PropTypes from 'prop-types'\nimport SignUp from './SignUp'\n//import styled from 'styled-components'\n\nconst Login = ({ login, users, register }) => {\n    const [username, setUsername] = useState('')\n    const [password, setPassword] = useState('')\n\n    const handleUsernameChange = (event) => {\n      setUsername(event.target.value)\n    }\n\n    const handlePasswordChange = (event) => {\n      setPassword(event.target.value)\n    }\n\n    const loginUser = (event) => {\n      event.preventDefault()\n      try{\n        login(username, password)\n\n      } catch (exception) {\n        console.log('Wrong username or password')\n      }\n    }\n\n    return (\n      <div>\n          <h3>Sign in!</h3>\n        <form>\n          <div>\n            <input value={username} onChange={handleUsernameChange} placeholder='username' />\n          </div>\n          <div>\n            <input type='password' value={password} onChange={handlePasswordChange} placeholder='password' />\n          </div>\n            <button onClick={loginUser} type='submit'>Login</button>\n        </form>\n\n        <SignUp login={login} users={users} register={register} />\n      </div>\n    )\n}\n\nLogin.propTypes = {\n  users: PropTypes.array.isRequired,\n  login: PropTypes.func.isRequired,\n  register: PropTypes.func.isRequired,\n}\n\nexport default Login","import React from 'react'\nimport PropTypes from 'prop-types'\nimport styled from 'styled-components'\nimport {\n  Link\n} from \"react-router-dom\"\n\nconst NavLink = styled(Link)`\n  padding: 0.25em;\n  font-size: 1em;\n  color: Azure;\n  font-weight: bold;\n`\n\nconst NavLinkRight = styled(Link)`\n  padding: 0.25em;\n  position: absolute;\n  right: 1em;\n  font-size: 1em;\n  color: Azure;\n  font-weight: bold;\n`\n\nconst Nav = styled.div`\n  background: black;\n  padding: 0.75em\n`\n\nconst Navbar = ({ user, logOut }) => {\n\n\n  return (\n    <Nav>\n      <NavLink to=\"/\">Home</NavLink>\n      <NavLink to=\"/\">Users</NavLink>\n      {user\n        ? <NavLinkRight onClick={logOut} to=\"/#\">Log out</NavLinkRight>\n        : <NavLinkRight to=\"/login\">Login</NavLinkRight>\n      }\n    </Nav>\n  )\n}\n\nNavbar.propTypes = {\n  user: PropTypes.object.isRequired,\n  logOut: PropTypes.func.isRequired,\n}\n\nexport default Navbar","import axios from 'axios'\nconst baseUrl = '/api/messages'\n\nlet token = null\n\nconst setToken = newToken => {\n  token = `bearer ${newToken}`\n}\n\nconst getAll = () => {\n  const request = axios.get(baseUrl)\n  return request.then(response => response.data)\n}\n\nconst send = async newObject => {\n  const config = {\n    headers: { Authorization: token },\n  }\n\n  const response = await axios.post(baseUrl, newObject, config)\n  return response.data\n}\n\n\nconst remove = async (id) => {\n  const config = {\n    headers: { Authorization: token },\n  }\n  await axios.delete(`${baseUrl}/${id}`, config)\n}\n\n\nexport default { getAll, send, remove, setToken }","import React from 'react'\nimport PropTypes from 'prop-types'\nimport styled from 'styled-components'\n\nconst MessageText = styled.div`\n  margin: 1em;\n  color: Azure\n`\n\nconst Message = ({ content, user }) => {\n    if(user && user !== null){\n        console.log(user.username)\n        return(\n          <MessageText>{user.username}: {content}</MessageText>\n        )\n    } else {\n        return(\n          <MessageText>anonymous: {content}</MessageText>\n        )\n    }\n\n}\n\nMessage.propTypes = {\n    content: PropTypes.String.isRequired,\n    user: PropTypes.object.isRequired,\n  }\n\nexport default Message","import React, { useState, useEffect } from 'react'\nimport PropTypes from 'prop-types'\nimport styled from 'styled-components'\nimport messageService from '../services/messages'\nimport Message from './message'\n\nconst MessageBox = styled.div`\n  background: Black;\n  position: relative;\n  right: 5em;\n  margin: 0.25em 4em;\n  padding: 1em 2em;\n  align-items: center;\n`\n\nconst MessageSpan = styled.span`\n  margin: 1em;\n  display: flex;\n`\n\nconst Textarea = styled.textarea`\nmin-height: 3em;\npadding: 0.5em;\ndisplay: flex;\nmargin: 0.5em;\nbackground: black;\ncolor: white;\nborder: none;\nborder-radius: 3px\n`\n\nconst MessageButton = styled.button`\ncolor: palevioletred;\nbackground: transparent;\nfont-size: 1em;\nborder: none;\nborder-bottom: solid PowderBlue;\n`\n\nconst Title = styled.h3`\n  color: Ivory;\n`\n\nconst ChatBox = ({ user }) => {\n  const [messages, setMessages] = useState([])\n  const [newContent, setNewContent] = useState('')\n\n  console.log(user)\n\n  useEffect(() => {\n    messageService.getAll().then(messages =>\n      setMessages( messages )\n    )\n  }, [])\n\n  const handleMessageChange = (event) => {\n    setNewContent(event.target.value)\n  }\n\n  const sendMessage = () => {\n    console.log('user in sendMessage ' + user)\n\n    let message = null\n\n    if(user === null){\n      message = {\n        content: newContent,\n        date: Date.now(),\n        user: null\n      }\n    } else {\n      message = {\n        content: newContent,\n        date: Date.now(),\n        user: user\n      }\n    }\n    messageService.send(message)\n    setMessages(messages.concat(message))\n    setNewContent('')\n  }\n  \n  return (\n    <div>\n      <MessageBox>\n        <Title>Start Chatting!</Title>\n        {messages.map(message => (\n          <div key={message.id}>\n            <Message user={message.user} content={message.content} />\n          </div>\n        ))}\n      </MessageBox>\n      <MessageSpan><Textarea value={newContent} onChange={handleMessageChange}></Textarea><MessageButton onClick={sendMessage}>Send</MessageButton></MessageSpan>\n    </div>\n  )\n}\n\nChatBox.propTypes = {\n  user: PropTypes.func.isRequired,\n}\n\nexport default ChatBox","import React from 'react'\nimport PropTypes from 'prop-types'\nimport styled from 'styled-components'\n\nconst Noti = styled.div`\n  background: Azure\n  padding: 1em\n  position: relative;\n  margin: 0.25em 4em;\n`\n\nconst NotiText = styled.h1`\n  padding: 1em\n`\n\nconst Notification = ({ message }) => {\n  if(message !== null){\n    return (\n      <Noti>\n          <NotiText>{message}</NotiText>\n      </Noti>\n    )\n  }\n  \n  return null\n}\n\nNotification.propTypes = {\n  message: PropTypes.String.isRequired,\n}\n\nexport default Notification","import axios from 'axios'\nconst baseUrl = '/api/login'\n\nconst login = async credentials => {\n  const response = await axios.post(baseUrl, credentials)\n  return response.data\n}\n\nexport default { login }","import axios from 'axios'\nconst baseUrl = '/api/users'\n\nconst getAll = () => {\n    const request = axios.get(baseUrl)\n    return request.then(response => response.data)\n}\n\nconst create = async newObject => {\n  const response = await axios.post(baseUrl, newObject)\n  return response.data\n}\n\nexport default { getAll, create }","import React, { useState, useEffect } from 'react'\nimport styled from 'styled-components'\nimport Login from './components/Login'\nimport Navbar from './components/Navbar'\nimport ChatBox from './components/ChatBox'\nimport Notification from './components/Notification'\nimport loginService from './services/login'\nimport messageService from './services/messages'\nimport userService from './services/users'\nimport {\n  Switch,\n  Route,\n  Redirect,\n  useHistory\n} from \"react-router-dom\"\n\nconst Wrapper = styled.div`\nposition: relative;\nwidth: 100%;\nalign-items: center;\npadding: 4em;\nbackground: SeaShell\n`\n\nconst App = () => {\n  const [user, setUser] = useState(null)\n  const [users, setUsers] = useState([])\n  const history = useHistory()\n\n  useEffect(() => {\n    userService.getAll().then(users =>\n      setUsers( users )\n    )\n  }, [])\n\n  useEffect(() => {\n    const loggedUserJSON = window.localStorage.getItem('loggedChatAppUser')\n    if (loggedUserJSON) {\n      const user = JSON.parse(loggedUserJSON)\n      setUser(user)\n      console.log('setUser:' + user)\n      messageService.setToken(user.token)\n      console.log(\"logged in user: \" + user.username)\n    }\n  }, [])\n\n\n  const login = async (username, password) => {\n    console.log('login')\n    const user = await loginService.login({\n      username, password,\n    })\n  \n    window.localStorage.setItem(\n      'loggedChatAppUser', JSON.stringify(user)\n    )\n  \n    messageService.setToken(user.token)\n    setUser(user)\n    history.push('/')\n  }\n\n  const logOut = async () => {\n    window.localStorage.removeItem('loggedChatAppUser')\n    setUser(null)\n  }\n\n  const register = async (user) => {\n    await userService.create(user)\n    login(user.username, user.password) \n  }\n  console.log('user in App: ' + user)\n\n  return (\n    <div>\n      <Navbar user={user} logOut={logOut} />\n      <Notification message=\"hello\" />\n      <Wrapper>\n        <Switch>\n        <Route path=\"/login\">\n          {user \n            ? <Redirect to=\"/\" />\n            : <Login login={login} register={register} users={users} /> \n          }\n          </Route>\n          <Route path=\"/\">\n            <ChatBox user={user} />\n          </Route>\n        </Switch>\n      </Wrapper>\n    </div>\n  )\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport {\n  HashRouter\n} from \"react-router-dom\"\n\nReactDOM.render(\n<HashRouter history={history}>\n  <App />\n</HashRouter>,\ndocument.getElementById('root')\n)"],"sourceRoot":""}