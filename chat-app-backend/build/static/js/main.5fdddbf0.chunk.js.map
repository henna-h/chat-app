{"version":3,"sources":["components/Login.js","components/SignUp.js","components/Navbar.js","services/messages.js","components/Message.js","components/ChatBox.js","components/Notification.js","services/login.js","services/users.js","App.js","index.js"],"names":["FormContainer","styled","div","Form","form","FormButton","button","FormInput","input","H2","h2","Login","login","useState","username","setUsername","password","setPassword","value","onChange","event","target","placeholder","type","onClick","preventDefault","href","SignUp","register","password1","setPassword1","password2","setPassword2","NavLink","Link","NavLinkRight","Nav","Navbar","user","logOut","to","className","baseUrl","token","getAll","axios","get","then","response","data","send","newObject","a","config","headers","Authorization","post","remove","id","delete","setToken","newToken","MessageUser","Triangle","MessageText","Message","content","console","log","MessageBox","Messages","MessageSpan","span","Textarea","textarea","MessageButton","ChatBox","messages","setMessages","newContent","setNewContent","messagesEndRef","useRef","useEffect","messageService","current","scrollIntoView","behavior","scrollToBottom","map","message","ref","date","Date","now","concat","Noti","Notification","credentials","create","Wrapper","App","setUser","users","setUsers","notification","setNotification","history","useHistory","userService","loggedUserJSON","window","localStorage","getItem","JSON","parse","loginService","setItem","stringify","push","setTimeout","removeItem","includes","length","newUser","path","ReactDOM","render","document","getElementById"],"mappings":"6gCAKA,IAAMA,EAAgBC,IAAOC,IAAV,KASbC,EAAOF,IAAOG,KAAV,KAIJC,EAAaJ,IAAOK,OAAV,IAQJD,GAKNE,EAAYN,IAAOO,MAAV,KAQTC,EAAKR,IAAOS,GAAV,KA6COC,EAxCD,SAAC,GAAe,IAAbC,EAAY,EAAZA,MAAY,EACOC,mBAAS,IADhB,mBAClBC,EADkB,KACRC,EADQ,OAEOF,mBAAS,IAFhB,mBAElBG,EAFkB,KAERC,EAFQ,KAiBzB,OACE,eAACjB,EAAD,WACE,eAACG,EAAD,WACA,cAACM,EAAD,uBACE,8BACE,cAACF,EAAD,CAAWW,MAAOJ,EAAUK,SAlBP,SAACC,GAC5BL,EAAYK,EAAMC,OAAOH,QAiByCI,YAAY,eAE1E,8BACE,cAACf,EAAD,CAAWgB,KAAK,WAAWL,MAAOF,EAAUG,SAjBvB,SAACC,GAC5BH,EAAYG,EAAMC,OAAOH,QAgByDI,YAAY,eAExF,cAACjB,EAAD,CAAYmB,QAfF,SAACJ,GACjBA,EAAMK,iBACNb,EAAME,EAAUE,IAasBO,KAAK,SAArC,sBAEJ,mBAAGG,KAAK,YAAR,sC,q2BCpER,IAAM1B,EAAgBC,IAAOC,IAAV,KASbC,EAAOF,IAAOG,KAAV,KAIJC,EAAaJ,IAAOK,OAAV,IASJD,GAKNE,EAAYN,IAAOO,MAAV,KAQTC,EAAKR,IAAOS,GAAV,KA8DOiB,EAzDA,SAAC,GAAkB,IAAhBC,EAAe,EAAfA,SAAe,EACCf,mBAAS,IADV,mBACxBC,EADwB,KACdC,EADc,OAEGF,mBAAS,IAFZ,mBAExBgB,EAFwB,KAEbC,EAFa,OAGGjB,mBAAS,IAHZ,mBAGxBkB,EAHwB,KAGbC,EAHa,KA8B/B,OACE,8BACE,cAAC,EAAD,UACE,eAAC,EAAD,WACE,cAAC,EAAD,mCACA,8BACE,cAAC,EAAD,CAAWd,MAAOJ,EAAUK,SA/BN,SAACC,GAC/BL,EAAYK,EAAMC,OAAOH,QA8B8CI,YAAY,eAE7E,8BACE,cAAC,EAAD,CAAWC,KAAK,WAAWL,MAAOW,EAAWV,SA9BzB,SAACC,GAC7BU,EAAaV,EAAMC,OAAOH,QA6B4DI,YAAY,eAE5F,8BACE,cAAC,EAAD,CAAWC,KAAK,WAAWL,MAAOa,EAAWZ,SA7BzB,SAACC,GAC7BY,EAAaZ,EAAMC,OAAOH,QA4B4DI,YAAY,sBAE5F,cAAC,EAAD,CAAYE,QA3BK,SAACJ,GACxBA,EAAMK,iBAQJG,EANa,CACXd,SAAUA,EACVe,UAAWA,EACXE,UAAWA,KAqB8BR,KAAK,SAA5C,6B,okBChFV,IAAMU,EAAUhC,YAAOiC,IAAPjC,CAAH,IAGDgC,GAKNE,EAAelC,YAAOiC,IAAPjC,CAAH,IAQNkC,GAKNC,EAAMnC,IAAOC,IAAV,KA0BMmC,EAnBA,SAAC,GAAsB,IAApBC,EAAmB,EAAnBA,KAAMC,EAAa,EAAbA,OAGtB,OACE,eAACH,EAAD,WACE,eAACH,EAAD,CAASO,GAAG,IAAZ,cAAiB,mBAAGC,UAAU,wBAA9B,OACCH,EACG,cAACH,EAAD,CAAcX,QAASe,EAAQC,GAAG,KAAlC,SAAuC,mBAAGC,UAAU,6BACpD,cAACN,EAAD,CAAcK,GAAG,SAAjB,SAA0B,mBAAGC,UAAU,kC,iBC5C3CC,EAAU,gBAEZC,EAAQ,KA6BG,GAAEC,OAvBF,WAEb,OADgBC,IAAMC,IAAIJ,GACXK,MAAK,SAAAC,GAAQ,OAAIA,EAASC,SAqBlBC,KAlBf,uCAAG,WAAMC,GAAN,iBAAAC,EAAA,6DACLC,EAAS,CACbC,QAAS,CAAEC,cAAeZ,IAFjB,SAKYE,IAAMW,KAAKd,EAASS,EAAWE,GAL3C,cAKLL,EALK,yBAMJA,EAASC,MANL,2CAAH,sDAkBqBQ,OARnB,uCAAG,WAAOC,GAAP,eAAAN,EAAA,6DACPC,EAAS,CACbC,QAAS,CAAEC,cAAeZ,IAFf,SAIPE,IAAMc,OAAN,UAAgBjB,EAAhB,YAA2BgB,GAAML,GAJ1B,2CAAH,sDAQ2BO,SA3BtB,SAAAC,GACflB,EAAK,iBAAakB,K,gpBCFpB,IAAMC,EAAc7D,IAAOC,IAAV,KAKX6D,EAAW9D,IAAOC,IAAV,KASR8D,EAAc/D,IAAOC,IAAV,KAuCF+D,GA5BC,SAAC,GAAuB,IAArBC,EAAoB,EAApBA,QAAS5B,EAAW,EAAXA,KACxB,OAAGA,GAAiB,OAATA,GACP6B,QAAQC,IAAI9B,EAAKxB,UAEd,gCACC,cAACgD,EAAD,UAAcxB,EAAKxB,WACnB,cAACiD,EAAD,IACA,cAACC,EAAD,UAAcE,QAKlB,gCACE,cAACJ,EAAD,wBACA,cAACC,EAAD,IACA,cAACC,EAAD,UAAcE,Q,+lCCtCxB,IAAMG,GAAapE,IAAOC,IAAV,MAcVoE,GAAWrE,IAAOC,IAAV,MAORqE,GAActE,IAAOuE,KAAV,MAMXC,GAAWxE,IAAOyE,SAAV,MAWRC,GAAgB1E,IAAOK,OAAV,KAQPqE,IA6EGC,GAvEC,SAAC,GAAc,IAAZtC,EAAW,EAAXA,KAAW,EACIzB,mBAAS,IADb,mBACrBgE,EADqB,KACXC,EADW,OAEQjE,mBAAS,IAFjB,mBAErBkE,EAFqB,KAETC,EAFS,KAItBC,EAAiBC,iBAAO,MAM9BC,qBAAU,WACRC,EAAexC,SAASG,MAAK,SAAA8B,GAAQ,OACnCC,EAAaD,QAEd,IAEHM,qBAAU,YAVa,WAAO,IAAD,EAC3B,UAAAF,EAAeI,eAAf,SAAwBC,eAAe,CAAEC,SAAU,WAUnDC,KACC,CAACX,IA6BJ,OACE,8BACE,eAACR,GAAD,WACE,eAACC,GAAD,WACCO,EAASY,KAAI,SAAAC,GAAO,OACnB,8BACE,cAAC,GAAD,CAASpD,KAAMoD,EAAQpD,KAAM4B,QAASwB,EAAQxB,WADtCwB,EAAQhC,OAIpB,qBAAKiC,IAAKV,OAEZ,eAACV,GAAD,WACE,cAACE,GAAD,CAAUvD,MAAO6D,EAAY5D,SAtCP,SAACC,GAC3B4D,EAAc5D,EAAMC,OAAOH,UAsCvB,cAACyD,GAAD,CAAenD,QAnCD,WAElB,IAAIkE,EAAU,KAGZA,EADU,OAATpD,EACS,CACR4B,QAASa,EACTa,KAAMC,KAAKC,MACXxD,KAAM,MAGE,CACR4B,QAASa,EACTa,KAAMC,KAAKC,MACXxD,KAAMA,GAGV8C,EAAelC,KAAKwC,GACpBZ,EAAYD,EAASkB,OAAOL,IAC5BV,EAAc,KAgBV,2B,kQClHR,IAAMgB,GAAO/F,IAAOC,IAAV,MAwBK+F,GAdM,SAAC,GAAiB,IAAfP,EAAc,EAAdA,QACtB,OAAe,OAAZA,EAEC,cAACM,GAAD,UAAON,IAIJ,MCbM,IAAE9E,MALN,uCAAG,WAAMsF,GAAN,eAAA9C,EAAA,sEACWP,IAAMW,KAHf,aAG6B0C,GAD/B,cACNlD,EADM,yBAELA,EAASC,MAFJ,2CAAH,uDCFLP,GAAU,aAYD,IAAEE,OAVF,WAEX,OADgBC,IAAMC,IAAIJ,IACXK,MAAK,SAAAC,GAAQ,OAAIA,EAASC,SAQpBkD,OALb,uCAAG,WAAMhD,GAAN,eAAAC,EAAA,sEACUP,IAAMW,KAAKd,GAASS,GAD9B,cACPH,EADO,yBAENA,EAASC,MAFH,2CAAH,uD,wMCSZ,IAAMmD,GAAUnG,IAAOC,IAAV,MAiHEmG,GAxGH,WAAO,IAAD,EACQxF,mBAAS,MADjB,mBACTyB,EADS,KACHgE,EADG,OAEUzF,mBAAS,IAFnB,mBAET0F,EAFS,KAEFC,EAFE,OAGwB3F,mBAAS,MAHjC,mBAGT4F,EAHS,KAGKC,EAHL,KAIVC,EAAUC,eAEhBzB,qBAAU,WACR0B,GAAYjE,SAASG,MAAK,SAAAwD,GAAK,OAC7BC,EAAUD,QAEX,IAEHpB,qBAAU,WACR,IAAM2B,EAAiBC,OAAOC,aAAaC,QAAQ,qBACnD,GAAIH,EAAgB,CAClB,IAAMxE,EAAO4E,KAAKC,MAAML,GACxBR,EAAQhE,GACR8C,EAAexB,SAAStB,EAAKK,UAE9B,IAGH,IAAM/B,EAAK,uCAAG,WAAOE,EAAUE,GAAjB,eAAAoC,EAAA,+EAGSgE,GAAaxG,MAAM,CACpCE,WAAUE,aAJF,OAGJsB,EAHI,OAOVyE,OAAOC,aAAaK,QAClB,oBAAqBH,KAAKI,UAAUhF,IAGtC8C,EAAexB,SAAStB,EAAKK,OAC7B2D,EAAQhE,GACRqE,EAAQY,KAAK,KACbb,EAAgB,MAAQpE,EAAKxB,SAAW,KACxC0G,YAAW,WAAOd,EAAgB,QAAQ,KAfhC,kDAiBVA,EAAgB,8BAChBc,YAAW,WAAOd,EAAgB,QAAQ,KAlBhC,0DAAH,wDAsBLnE,EAAM,uCAAG,sBAAAa,EAAA,sDACb2D,OAAOC,aAAaS,WAAW,qBAC/BnB,EAAQ,MACRI,EAAgB,eAChBc,YAAW,WAAOd,EAAgB,QAAQ,KAJ7B,2CAAH,qDAON9E,EAAQ,uCAAG,WAAOU,GAAP,eAAAc,EAAA,0DAEGmD,EAAMd,KAAI,SAAAnD,GAAI,OAAIA,EAAKxB,YAE5B4G,SAASpF,EAAKxB,UAJZ,gBAKb4F,EAAgB,6BALH,4BAMLpE,EAAKxB,SAAS6G,OAAS,GAAKrF,EAAKT,UAAU8F,OAAS,GAN/C,gBAObjB,EAAgB,4DAPH,0BAQLpE,EAAKT,YAAcS,EAAKP,UARnB,iBASb2E,EAAgB,oCATH,+BAYbc,YAAW,WAAOd,EAAgB,SAE5BkB,EAAU,CACd9G,SAAUwB,EAAKxB,SACfE,SAAUsB,EAAKT,WAhBJ,UAmBPgF,GAAYV,OAAOyB,GAnBZ,QAqBbhH,EAAMgH,EAAQ9G,SAAU8G,EAAQ5G,UArBnB,4CAAH,sDA0Bd,OACE,8BACE,eAACoF,GAAD,WACA,cAAC,EAAD,CAAQ9D,KAAMA,EAAMC,OAAQA,IAC5B,cAAC,GAAD,CAAcmD,QAASe,IACrB,eAAC,KAAD,WACA,cAAC,KAAD,CAAOoB,KAAK,SAAZ,SACGvF,EACG,cAAC,KAAD,CAAUE,GAAG,MACb,cAAC,EAAD,CAAO5B,MAAOA,EAAOgB,SAAUA,EAAU2E,MAAOA,MAGpD,cAAC,KAAD,CAAOsB,KAAK,UAAZ,SACCvF,EACG,cAAC,KAAD,CAAUE,GAAG,MACb,cAAC,EAAD,CAAQ5B,MAAOA,EAAOgB,SAAUA,EAAU2E,MAAOA,MAGrD,cAAC,KAAD,CAAOsB,KAAK,IAAZ,SACE,cAAC,GAAD,CAASvF,KAAMA,eCnH3BwF,IAASC,OACT,cAAC,IAAD,CAAYpB,QAASA,QAArB,SACE,cAAC,GAAD,MAEFqB,SAASC,eAAe,W","file":"static/js/main.5fdddbf0.chunk.js","sourcesContent":["import React, { useState } from 'react'\nimport PropTypes from 'prop-types'\nimport styled from 'styled-components'\n\n\nconst FormContainer = styled.div`\nposition: relative;\nmargin-top: 4em;\nmargin-left: 37%;\npadding: 1em 2em;\nalign-items: center;\ndisplay: block;\n`\n\nconst Form = styled.form`\n  align-items: center;\n`\n\nconst FormButton = styled.button`\n  font-size: 1em;\n  margin: 1em;\n  padding: 0.25em 1em;\n  border-radius: 5px;\n  border: 2px solid;\n  color: white;\n  background: black;\n  &:hover ${FormButton} {\n    color: PowderBlue;\n  }\n`\n\nconst FormInput = styled.input`\n  padding: 0.5em;\n  margin: 0.5em;\n  background: LightGray;\n  border: none;\n  border-radius: 3px;\n`\n\nconst H2 = styled.h2`\n  font: \"Lato\", Arial, sans-serif;\n\n`\n\nconst Login = ({ login }) => {\n    const [username, setUsername] = useState('')\n    const [password, setPassword] = useState('')\n\n    const handleUsernameChange = (event) => {\n      setUsername(event.target.value)\n    }\n\n    const handlePasswordChange = (event) => {\n      setPassword(event.target.value)\n    }\n\n    const loginUser = (event) => {\n      event.preventDefault()\n      login(username, password)\n    }\n\n    return (\n      <FormContainer>\n        <Form>\n        <H2>Sign in!</H2>\n          <div>\n            <FormInput value={username} onChange={handleUsernameChange} placeholder='username' />\n          </div>\n          <div>\n            <FormInput type='password' value={password} onChange={handlePasswordChange} placeholder='password' />\n          </div>\n            <FormButton onClick={loginUser} type='submit'>Login</FormButton>\n        </Form>\n        <a href=\"/#/signup\">No account? Sign up?</a>\n      </FormContainer>\n    )\n}\n\nLogin.propTypes = {\n  users: PropTypes.array.isRequired,\n  login: PropTypes.func.isRequired,\n  register: PropTypes.func.isRequired,\n}\n\nexport default Login","import React, { useState } from 'react'\nimport PropTypes from 'prop-types'\nimport styled from 'styled-components'\n\n\nconst FormContainer = styled.div`\nposition: relative;\nmargin-top: 4em;\nmargin-left: 37%;\npadding: 1em 2em;\nalign-items: center;\ndisplay: block;\n`\n\nconst Form = styled.form`\n  align-items: center;\n`\n\nconst FormButton = styled.button`\n  font-size: 1em;\n  font: 14px/22px \"Lato\", Arial, sans-serif;\n  margin: 1em;\n  padding: 0.25em 1em;\n  border-radius: 5px;\n  border: 2px solid;\n  color: white;\n  background: black;\n  &:hover ${FormButton} {\n    color: PowderBlue;\n  }\n`\n\nconst FormInput = styled.input`\n  padding: 0.5em;\n  margin: 0.5em;\n  background: LightGray;\n  border: none;\n  border-radius: 3px;\n`\n\nconst H2 = styled.h2`\n  font: \"Lato\", Arial, sans-serif;\n`\n\n\nconst SignUp = ({ register }) => {\n  const [username, setUsername] = useState('')\n  const [password1, setPassword1] = useState('')\n  const [password2, setPassword2] = useState('')\n\n  const handleNewUsernameChange = (event) => {\n    setUsername(event.target.value)\n  }\n\n  const handlePassword1Change = (event) => {\n    setPassword1(event.target.value)\n  }\n\n  const handlePassword2Change = (event) => {\n    setPassword2(event.target.value)\n  }\n\n  const registerAndLogin = (event) => {\n    event.preventDefault()\n\n      const user = {\n        username: username,\n        password1: password1,\n        password2: password2,\n      }\n\n      register(user)\n\n  }\n\n  return(\n    <div>\n      <FormContainer>\n        <Form>\n          <H2>No account? Sign up!</H2>\n          <div>\n            <FormInput value={username} onChange={handleNewUsernameChange} placeholder='username' />\n          </div>\n          <div>\n            <FormInput type='password' value={password1} onChange={handlePassword1Change} placeholder='password' />\n          </div>\n          <div>\n            <FormInput type='password' value={password2} onChange={handlePassword2Change} placeholder='repeat password' />\n          </div>\n          <FormButton onClick={registerAndLogin} type='submit'>Sign up</FormButton>\n        </Form>\n      </FormContainer>\n    </div>\n  )\n}\n\nSignUp.propTypes = {\n  //users: PropTypes.array.isRequired,\n  login: PropTypes.func.isRequired,\n  register: PropTypes.func.isRequired,\n}\n\nexport default SignUp","import React from 'react'\nimport PropTypes from 'prop-types'\nimport styled from 'styled-components'\nimport 'semantic-ui-css/semantic.min.css'\n//import { Icon } from 'semantic-ui-react'\nimport {\n  Link\n} from \"react-router-dom\"\n\nconst NavLink = styled(Link)`\n  padding: 0.25em;\n  color: white;\n  &:hover ${NavLink} {\n    color: PowderBlue;\n  };\n` \n\nconst NavLinkRight = styled(Link)`\n  padding: 0.25em;\n  position: absolute;\n  font: 14px/22px \"Lato\", Arial, sans-serif;\n  right: 1em;\n  font-size: 1em;\n  color: white;\n  font-weight: bold;\n  &:hover ${NavLinkRight} {\n    color: PowderBlue;\n  };\n`\n\nconst Nav = styled.div`\n  width: 100%;\n  background: black;\n  padding: 0.75em;\n`\n\n\nconst Navbar = ({ user, logOut }) => {\n\n\n  return (\n    <Nav>\n      <NavLink to=\"/\"> <i className=\"big white home icon\"/> </NavLink>\n      {user\n        ? <NavLinkRight onClick={logOut} to=\"/#\"><i className=\"big white sign-in icon\"/></NavLinkRight>\n        : <NavLinkRight to=\"/login\"><i className=\"big white sign-out icon\"/></NavLinkRight>\n      }\n    </Nav>\n  )\n}\n\nNavbar.propTypes = {\n  user: PropTypes.object.isRequired,\n  logOut: PropTypes.func.isRequired,\n}\n\nexport default Navbar","import axios from 'axios'\nconst baseUrl = '/api/messages'\n\nlet token = null\n\nconst setToken = newToken => {\n  token = `bearer ${newToken}`\n}\n\nconst getAll = () => {\n  const request = axios.get(baseUrl)\n  return request.then(response => response.data)\n}\n\nconst send = async newObject => {\n  const config = {\n    headers: { Authorization: token },\n  }\n\n  const response = await axios.post(baseUrl, newObject, config)\n  return response.data\n}\n\n\nconst remove = async (id) => {\n  const config = {\n    headers: { Authorization: token },\n  }\n  await axios.delete(`${baseUrl}/${id}`, config)\n}\n\n\nexport default { getAll, send, remove, setToken }","import React from 'react'\nimport PropTypes from 'prop-types'\nimport styled from 'styled-components'\n\nconst MessageUser = styled.div`\n  margin: 0.5em;\n  color: White;\n  font: 14px/22px \"Lato\", Arial, sans-serif;\n`\nconst Triangle = styled.div`\n  width: 0; \n  height: 0;\n  margin-left: 5%;\n  border-left: 10px solid transparent;\n  border-right: 10px solid transparent;\n  border-bottom: 10px solid PowderBlue;\n`\n\nconst MessageText = styled.div`\n  width: 90%;\n  border: none;\n  padding: 10px 20px;\n  font: 14px/22px \"Lato\", Arial, sans-serif;\n  margin-bottom: 10px;\n  border-radius: 5px;\n  resize: none;\n  background: PowderBlue;\n`\n\nconst Message = ({ content, user }) => {\n    if(user && user !== null){\n        console.log(user.username)\n        return(\n           <div>\n            <MessageUser>{user.username}</MessageUser>\n            <Triangle />\n            <MessageText>{content}</MessageText>\n          </div>\n        )\n    } else {\n        return(\n        <div>\n          <MessageUser>anonymous</MessageUser>\n          <Triangle />\n          <MessageText>{content}</MessageText>\n        </div>\n        )\n    }\n\n}\n\nMessage.propTypes = {\n    content: PropTypes.string.isRequired,\n    user: PropTypes.object.isRequired,\n    //time: PropTypes.object.isRequired,\n  }\n\nexport default Message","import React, { useState, useEffect, useRef } from 'react'\nimport PropTypes from 'prop-types'\nimport styled from 'styled-components'\nimport messageService from '../services/messages'\nimport Message from './Message'\n\nconst MessageBox = styled.div`\n  background: Black;\n  width: 30em;\n  height: 35em;\n  position: relative;\n  margin-top: 4em;\n  margin-left: auto;\n  margin-right: auto;\n  padding: 1em 2em;\n  align-items: center;\n  display: block;\n  border-radius: 5px;\n`\n\nconst Messages = styled.div`\n  overflow: scroll;\n  width: 29em;\n  height: 30em;\n  padding-bottom: 1em;\n`\n\nconst MessageSpan = styled.span`\n  position: absolute;\n  bottom: 0.5em;\n  display:inline-flex;\n`\n\nconst Textarea = styled.textarea`\n  width: 20em;\n  min-height: 4.5em;\n  border: none;\n  padding: 10px 20px;\n  font: 14px/22px \"Lato\", Arial, sans-serif;\n  margin-bottom: 10px;\n  border-radius: 5px;\n  resize: none;\n`\n\nconst MessageButton = styled.button`\n  height: 4.5em;\n  color: Black;\n  background: PowderBlue;;\n  font-size: 1em;\n  padding: 1em;\n  border: none;\n  border-radius: 5px;\n  &:hover ${MessageButton} {\n    background: DarkCyan;\n  }\n  }\n`\n\nconst ChatBox = ({ user }) => {\n  const [messages, setMessages] = useState([])\n  const [newContent, setNewContent] = useState('')\n\n  const messagesEndRef = useRef(null)\n\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" })\n  }\n\n  useEffect(() => {\n    messageService.getAll().then(messages =>\n      setMessages( messages )\n    )\n  }, [])\n\n  useEffect(() => {\n    scrollToBottom()\n  }, [messages]);\n\n\n  const handleMessageChange = (event) => {\n    setNewContent(event.target.value)\n  }\n\n  const sendMessage = () => {\n\n    let message = null\n\n    if(user === null){\n      message = {\n        content: newContent,\n        date: Date.now(),\n        user: null\n      }\n    } else {\n      message = {\n        content: newContent,\n        date: Date.now(),\n        user: user\n      }\n    }\n    messageService.send(message)\n    setMessages(messages.concat(message))\n    setNewContent('')\n  }\n  \n  return (\n    <div>\n      <MessageBox>\n        <Messages>\n        {messages.map(message => (\n          <div key={message.id}>\n            <Message user={message.user} content={message.content} />\n          </div>\n        ))}\n        <div ref={messagesEndRef} />\n        </Messages>\n      <MessageSpan>\n        <Textarea value={newContent} onChange={handleMessageChange}></Textarea>\n        <MessageButton onClick={sendMessage}>Send</MessageButton>\n      </MessageSpan>\n      </MessageBox>\n    </div>\n  )\n}\n\nChatBox.propTypes = {\n  user: PropTypes.func.isRequired,\n}\n\nexport default ChatBox","import React from 'react'\nimport PropTypes from 'prop-types'\nimport styled from 'styled-components'\n\nconst Noti = styled.div`\n  border: 1px solid DarkCyan;\n  background-color: PowderBlue;\n  color: Black;\n  font: 14px/22px \"Lato\", Arial, sans-serif;\n  transition:0.5s;\n  cursor:pointer;\n  padding: 0.25em\n`\n\nconst Notification = ({ message }) => {\n  if(message !== null){\n    return (\n      <Noti>{message}</Noti>\n    )\n  }\n  \n  return null\n}\n\nNotification.propTypes = {\n  message: PropTypes.string.isRequired,\n}\n\nexport default Notification","import axios from 'axios'\nconst baseUrl = '/api/login'\n\nconst login = async credentials => {\n  const response = await axios.post(baseUrl, credentials)\n  return response.data\n}\n\nexport default { login }","import axios from 'axios'\nconst baseUrl = '/api/users'\n\nconst getAll = () => {\n    const request = axios.get(baseUrl)\n    return request.then(response => response.data)\n}\n\nconst create = async newObject => {\n  const response = await axios.post(baseUrl, newObject)\n  return response.data\n}\n\nexport default { getAll, create }","import React, { useState, useEffect } from 'react'\nimport styled from 'styled-components'\nimport Login from './components/Login'\nimport SignUp from './components/SignUp'\nimport Navbar from './components/Navbar'\nimport ChatBox from './components/ChatBox'\nimport Notification from './components/Notification'\nimport loginService from './services/login'\nimport messageService from './services/messages'\nimport userService from './services/users'\nimport {\n  Switch,\n  Route,\n  Redirect,\n  useHistory\n} from \"react-router-dom\"\n\nconst Wrapper = styled.div`\n  position: relative;\n  width: 100%;\n  height: 100%;\n  align-items: center;\n  padding: 0em;\n  background: white;\n`\n\nconst App = () => {\n  const [user, setUser] = useState(null)\n  const [users, setUsers] = useState([])\n  const [notification, setNotification] = useState(null)\n  const history = useHistory()\n\n  useEffect(() => {\n    userService.getAll().then(users =>\n      setUsers( users )\n    )\n  }, [])\n\n  useEffect(() => {\n    const loggedUserJSON = window.localStorage.getItem('loggedChatAppUser')\n    if (loggedUserJSON) {\n      const user = JSON.parse(loggedUserJSON)\n      setUser(user)\n      messageService.setToken(user.token)\n    }\n  }, [])\n\n\n  const login = async (username, password) => {\n\n    try{\n      const user = await loginService.login({\n        username, password,\n      })\n    \n      window.localStorage.setItem(\n        'loggedChatAppUser', JSON.stringify(user)\n      )\n    \n      messageService.setToken(user.token)\n      setUser(user)\n      history.push('/')\n      setNotification(\"Hi \" + user.username + \"!\")\n      setTimeout(() => {setNotification(null)}, 5*1000)\n    } catch (exception) {\n      setNotification('Wrong username or password')\n      setTimeout(() => {setNotification(null)}, 5*1000)\n    }\n  }\n\n  const logOut = async () => {\n    window.localStorage.removeItem('loggedChatAppUser')\n    setUser(null)\n    setNotification(\"Logged out!\")\n    setTimeout(() => {setNotification(null)}, 3*1000)\n  }\n\n  const register = async (user) => {\n\n    const usernames = users.map(user => user.username)\n\n    if(usernames.includes(user.username)){\n      setNotification('Username is already taken')\n    } else if(user.username.length < 3 || user.password1.length < 3){\n      setNotification('Username and password must be at least 3 characters long')\n    } else if(user.password1 !== user.password2){\n      setNotification('Make sure password fields match!')\n    } else {\n\n      setTimeout(() => {setNotification(null)})\n\n      const newUser = {\n        username: user.username,\n        password: user.password1,\n      }\n\n      await userService.create(newUser)\n\n      login(newUser.username, newUser.password) \n\n    }\n  }\n\n  return (\n    <div>\n      <Wrapper>\n      <Navbar user={user} logOut={logOut} />\n      <Notification message={notification} />\n        <Switch>\n        <Route path=\"/login\">\n          {user \n            ? <Redirect to=\"/\" />\n            : <Login login={login} register={register} users={users} /> \n          }\n          </Route>\n          <Route path=\"/signup\">\n          {user \n            ? <Redirect to=\"/\" />\n            : <SignUp login={login} register={register} users={users} /> \n          }\n          </Route>\n          <Route path=\"/\">\n            <ChatBox user={user} />\n          </Route>\n        </Switch>\n      </Wrapper>\n    </div>\n  )\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport {\n  HashRouter\n} from \"react-router-dom\"\n\nReactDOM.render(\n<HashRouter history={history}>\n  <App />\n</HashRouter>,\ndocument.getElementById('root')\n)"],"sourceRoot":""}