(this["webpackJsonpchat-app-frontend"]=this["webpackJsonpchat-app-frontend"]||[]).push([[0],{66:function(n,e,t){"use strict";t.r(e);var r=t(1),a=t(0),c=t(33),o=t.n(c),i=t(6),u=t.n(i),s=t(12),l=t(7),d=t(2),b=t(3);function j(){var n=Object(d.a)(['\n  font: "Lato", Arial, sans-serif;\n\n']);return j=function(){return n},n}function p(){var n=Object(d.a)(["\n  padding: 0.5em;\n  margin: 0.5em;\n  background: LightGray;\n  border: none;\n  border-radius: 3px;\n"]);return p=function(){return n},n}function f(){var n=Object(d.a)(["\n  font-size: 1em;\n  margin: 1em;\n  padding: 0.25em 1em;\n  border-radius: 5px;\n  border: 2px solid;\n  color: white;\n  background: black;\n  &:hover "," {\n    color: PowderBlue;\n  }\n"]);return f=function(){return n},n}function h(){var n=Object(d.a)(["\n  align-items: center;\n"]);return h=function(){return n},n}function g(){var n=Object(d.a)(["\nposition: relative;\nmargin-top: 4em;\nmargin-left: 37%;\npadding: 1em 2em;\nalign-items: center;\ndisplay: block;\n"]);return g=function(){return n},n}var O=b.a.div(g()),m=b.a.form(h()),v=b.a.button(f(),v),x=b.a.input(p()),w=b.a.h2(j()),k=function(n){var e=n.login,t=Object(a.useState)(""),c=Object(l.a)(t,2),o=c[0],i=c[1],u=Object(a.useState)(""),s=Object(l.a)(u,2),d=s[0],b=s[1];return Object(r.jsxs)(O,{children:[Object(r.jsxs)(m,{children:[Object(r.jsx)(w,{children:"Sign in!"}),Object(r.jsx)("div",{children:Object(r.jsx)(x,{value:o,onChange:function(n){i(n.target.value)},placeholder:"username"})}),Object(r.jsx)("div",{children:Object(r.jsx)(x,{type:"password",value:d,onChange:function(n){b(n.target.value)},placeholder:"password"})}),Object(r.jsx)(v,{onClick:function(n){n.preventDefault(),e(o,d)},type:"submit",children:"Login"})]}),Object(r.jsx)("a",{href:"/#/signup",children:"No account? Sign up?"})]})};function y(){var n=Object(d.a)(['\n  font: "Lato", Arial, sans-serif;\n']);return y=function(){return n},n}function S(){var n=Object(d.a)(["\n  padding: 0.5em;\n  margin: 0.5em;\n  background: LightGray;\n  border: none;\n  border-radius: 3px;\n"]);return S=function(){return n},n}function A(){var n=Object(d.a)(['\n  font-size: 1em;\n  font: 14px/22px "Lato", Arial, sans-serif;\n  margin: 1em;\n  padding: 0.25em 1em;\n  border-radius: 5px;\n  border: 2px solid;\n  color: white;\n  background: black;\n  &:hover '," {\n    color: PowderBlue;\n  }\n"]);return A=function(){return n},n}function C(){var n=Object(d.a)(["\n  align-items: center;\n"]);return C=function(){return n},n}function B(){var n=Object(d.a)(["\nposition: relative;\nmargin-top: 4em;\nmargin-left: 37%;\npadding: 1em 2em;\nalign-items: center;\ndisplay: block;\n"]);return B=function(){return n},n}var L=b.a.div(B()),z=b.a.form(C()),P=b.a.button(A(),P),N=b.a.input(S()),T=b.a.h2(y()),D=function(n){var e=n.register,t=Object(a.useState)(""),c=Object(l.a)(t,2),o=c[0],i=c[1],u=Object(a.useState)(""),s=Object(l.a)(u,2),d=s[0],b=s[1],j=Object(a.useState)(""),p=Object(l.a)(j,2),f=p[0],h=p[1];return Object(r.jsx)("div",{children:Object(r.jsx)(L,{children:Object(r.jsxs)(z,{children:[Object(r.jsx)(T,{children:"No account? Sign up!"}),Object(r.jsx)("div",{children:Object(r.jsx)(N,{value:o,onChange:function(n){i(n.target.value)},placeholder:"username"})}),Object(r.jsx)("div",{children:Object(r.jsx)(N,{type:"password",value:d,onChange:function(n){b(n.target.value)},placeholder:"password"})}),Object(r.jsx)("div",{children:Object(r.jsx)(N,{type:"password",value:f,onChange:function(n){h(n.target.value)},placeholder:"repeat password"})}),Object(r.jsx)(P,{onClick:function(n){n.preventDefault(),e({username:o,password1:d,password2:f})},type:"submit",children:"Sign up"})]})})})},E=(t(44),t(15));function I(){var n=Object(d.a)(["\n  width: 100%;\n  background: black;\n  padding: 0.75em;\n"]);return I=function(){return n},n}function U(){var n=Object(d.a)(['\n  padding: 0.25em;\n  position: absolute;\n  font: 14px/22px "Lato", Arial, sans-serif;\n  right: 1em;\n  font-size: 1em;\n  color: white;\n  font-weight: bold;\n  &:hover '," {\n    color: PowderBlue;\n  };\n"]);return U=function(){return n},n}function J(){var n=Object(d.a)(["\n  padding: 0.25em;\n  color: white;\n  &:hover "," {\n    color: PowderBlue;\n  };\n"]);return J=function(){return n},n}var G=Object(b.a)(E.b)(J(),G),W=Object(b.a)(E.b)(U(),W),H=b.a.div(I()),M=function(n){var e=n.user,t=n.logOut;return Object(r.jsxs)(H,{children:[Object(r.jsxs)(G,{to:"/",children:[" ",Object(r.jsx)("i",{className:"big white home icon"})," "]}),e?Object(r.jsx)(W,{onClick:t,to:"/#",children:Object(r.jsx)("i",{className:"big white sign-in icon"})}):Object(r.jsx)(W,{to:"/login",children:Object(r.jsx)("i",{className:"big white sign-out icon"})})]})},R=t(13),V=t.n(R),q="/api/messages",F=null,K={getAll:function(){return V.a.get(q).then((function(n){return n.data}))},send:function(){var n=Object(s.a)(u.a.mark((function n(e){var t,r;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t={headers:{Authorization:F}},n.next=3,V.a.post(q,e,t);case 3:return r=n.sent,n.abrupt("return",r.data);case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),remove:function(){var n=Object(s.a)(u.a.mark((function n(e){var t;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t={headers:{Authorization:F}},n.next=3,V.a.delete("".concat(q,"/").concat(e),t);case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),setToken:function(n){F="bearer ".concat(n)}};function Q(){var n=Object(d.a)(['\n  width: 90%;\n  border: none;\n  padding: 10px 20px;\n  font: 14px/22px "Lato", Arial, sans-serif;\n  margin-bottom: 10px;\n  border-radius: 5px;\n  resize: none;\n  background: PowderBlue;\n']);return Q=function(){return n},n}function X(){var n=Object(d.a)(["\n  width: 0; \n  height: 0;\n  margin-left: 5%;\n  border-left: 10px solid transparent;\n  border-right: 10px solid transparent;\n  border-bottom: 10px solid PowderBlue;\n"]);return X=function(){return n},n}function Y(){var n=Object(d.a)(['\n  margin: 0.5em;\n  color: White;\n  font: 14px/22px "Lato", Arial, sans-serif;\n']);return Y=function(){return n},n}var Z=b.a.div(Y()),$=b.a.div(X()),_=b.a.div(Q()),nn=function(n){var e=n.content,t=n.user;return t&&null!==t?(console.log(t.username),Object(r.jsxs)("div",{children:[Object(r.jsx)(Z,{children:t.username}),Object(r.jsx)($,{}),Object(r.jsx)(_,{children:e})]})):Object(r.jsxs)("div",{children:[Object(r.jsx)(Z,{children:"anonymous"}),Object(r.jsx)($,{}),Object(r.jsx)(_,{children:e})]})};function en(){var n=Object(d.a)(["\n  height: 4.5em;\n  color: Black;\n  background: PowderBlue;;\n  font-size: 1em;\n  padding: 1em;\n  border: none;\n  border-radius: 5px;\n  &:hover "," {\n    background: DarkCyan;\n  }\n  }\n"]);return en=function(){return n},n}function tn(){var n=Object(d.a)(['\n  width: 20em;\n  min-height: 4.5em;\n  border: none;\n  padding: 10px 20px;\n  font: 14px/22px "Lato", Arial, sans-serif;\n  margin-bottom: 10px;\n  border-radius: 5px;\n  resize: none;\n']);return tn=function(){return n},n}function rn(){var n=Object(d.a)(["\n  position: absolute;\n  bottom: 0.5em;\n  display:inline-flex;\n"]);return rn=function(){return n},n}function an(){var n=Object(d.a)(["\n  overflow: scroll;\n  width: 29em;\n  height: 30em;\n  padding-bottom: 1em;\n"]);return an=function(){return n},n}function cn(){var n=Object(d.a)(["\n  background: Black;\n  width: 30em;\n  height: 35em;\n  position: relative;\n  margin-top: 4em;\n  margin-left: auto;\n  margin-right: auto;\n  padding: 1em 2em;\n  align-items: center;\n  display: block;\n  border-radius: 5px;\n"]);return cn=function(){return n},n}var on=b.a.div(cn()),un=b.a.div(an()),sn=b.a.span(rn()),ln=b.a.textarea(tn()),dn=b.a.button(en(),dn),bn=function(n){var e=n.user,t=Object(a.useState)([]),c=Object(l.a)(t,2),o=c[0],i=c[1],u=Object(a.useState)(""),s=Object(l.a)(u,2),d=s[0],b=s[1],j=Object(a.useRef)(null);Object(a.useEffect)((function(){K.getAll().then((function(n){return i(n)}))}),[]),Object(a.useEffect)((function(){!function(){var n;null===(n=j.current)||void 0===n||n.scrollIntoView({behavior:"smooth"})}()}),[o]);return Object(r.jsx)("div",{children:Object(r.jsxs)(on,{children:[Object(r.jsxs)(un,{children:[o.map((function(n){return Object(r.jsx)("div",{children:Object(r.jsx)(nn,{user:n.user,content:n.content})},n.id)})),Object(r.jsx)("div",{ref:j})]}),Object(r.jsxs)(sn,{children:[Object(r.jsx)(ln,{value:d,onChange:function(n){b(n.target.value)}}),Object(r.jsx)(dn,{onClick:function(){var n=null;n=null===e?{content:d,date:Date.now(),user:null}:{content:d,date:Date.now(),user:e},K.send(n),i(o.concat(n)),b("")},children:"Send"})]})]})})};function jn(){var n=Object(d.a)(['\n  border: 1px solid DarkCyan;\n  background-color: PowderBlue;\n  color: Black;\n  font: 14px/22px "Lato", Arial, sans-serif;\n  transition:0.5s;\n  cursor:pointer;\n  padding: 0.25em\n']);return jn=function(){return n},n}var pn=b.a.div(jn()),fn=function(n){var e=n.message;return null!==e?Object(r.jsx)(pn,{children:e}):null},hn={login:function(){var n=Object(s.a)(u.a.mark((function n(e){var t;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,V.a.post("/api/login",e);case 2:return t=n.sent,n.abrupt("return",t.data);case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},gn="/api/users",On={getAll:function(){return V.a.get(gn).then((function(n){return n.data}))},create:function(){var n=Object(s.a)(u.a.mark((function n(e){var t;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,V.a.post(gn,e);case 2:return t=n.sent,n.abrupt("return",t.data);case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},mn=t(4);function vn(){var n=Object(d.a)(["\n  position: relative;\n  width: 100%;\n  height: 100%;\n  align-items: center;\n  padding: 0em;\n  background: white;\n"]);return vn=function(){return n},n}var xn=b.a.div(vn()),wn=function(){var n=Object(a.useState)(null),e=Object(l.a)(n,2),t=e[0],c=e[1],o=Object(a.useState)([]),i=Object(l.a)(o,2),d=i[0],b=i[1],j=Object(a.useState)(null),p=Object(l.a)(j,2),f=p[0],h=p[1],g=Object(mn.g)();Object(a.useEffect)((function(){On.getAll().then((function(n){return b(n)}))}),[]),Object(a.useEffect)((function(){var n=window.localStorage.getItem("loggedChatAppUser");if(n){var e=JSON.parse(n);c(e),K.setToken(e.token)}}),[]);var O=function(){var n=Object(s.a)(u.a.mark((function n(e,t){var r;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,hn.login({username:e,password:t});case 3:r=n.sent,window.localStorage.setItem("loggedChatAppUser",JSON.stringify(r)),K.setToken(r.token),c(r),g.push("/"),h("Hi "+r.username+"!"),setTimeout((function(){h(null)}),5e3),n.next=16;break;case 12:n.prev=12,n.t0=n.catch(0),h("Wrong username or password"),setTimeout((function(){h(null)}),5e3);case 16:case"end":return n.stop()}}),n,null,[[0,12]])})));return function(e,t){return n.apply(this,arguments)}}(),m=function(){var n=Object(s.a)(u.a.mark((function n(){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:window.localStorage.removeItem("loggedChatAppUser"),c(null),h("Logged out!"),setTimeout((function(){h(null)}),3e3);case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),v=function(){var n=Object(s.a)(u.a.mark((function n(e){var t;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!d.map((function(n){return n.username})).includes(e.username)){n.next=5;break}h("Username is already taken"),n.next=18;break;case 5:if(!(e.username.length<3||e.password1.length<3)){n.next=9;break}h("Username and password must be at least 3 characters long"),n.next=18;break;case 9:if(e.password1===e.password2){n.next=13;break}h("Make sure password fields match!"),n.next=18;break;case 13:return setTimeout((function(){h(null)})),t={username:e.username,password:e.password1},n.next=17,On.create(t);case 17:O(t.username,t.password);case 18:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return Object(r.jsx)("div",{children:Object(r.jsxs)(xn,{children:[Object(r.jsx)(M,{user:t,logOut:m}),Object(r.jsx)(fn,{message:f}),Object(r.jsxs)(mn.d,{children:[Object(r.jsx)(mn.b,{path:"/login",children:t?Object(r.jsx)(mn.a,{to:"/"}):Object(r.jsx)(k,{login:O,register:v,users:d})}),Object(r.jsx)(mn.b,{path:"/signup",children:t?Object(r.jsx)(mn.a,{to:"/"}):Object(r.jsx)(D,{login:O,register:v,users:d})}),Object(r.jsx)(mn.b,{path:"/",children:Object(r.jsx)(bn,{user:t})})]})]})})};o.a.render(Object(r.jsx)(E.a,{history:history,children:Object(r.jsx)(wn,{})}),document.getElementById("root"))}},[[66,1,2]]]);
//# sourceMappingURL=main.5fdddbf0.chunk.js.map