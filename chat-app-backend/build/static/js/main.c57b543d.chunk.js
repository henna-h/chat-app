(this["webpackJsonpchat-app-frontend"]=this["webpackJsonpchat-app-frontend"]||[]).push([[0],{68:function(n,e,t){"use strict";t.r(e);var r=t(1),a=t(0),o=t(33),c=t.n(o),i=t(6),u=t.n(i),s=t(12),l=t(7),d=t(2),b=t(3);function p(){var n=Object(d.a)(['\n  font: "Lato", Arial, sans-serif;\n  float: center;\n']);return p=function(){return n},n}function f(){var n=Object(d.a)(["\n  padding: 0.5em;\n  margin: 0.5em;\n  background: white;\n  border: none;\n  border-radius: 3px;\n  box-shadow: inset 0 0 1.7px;\n"]);return f=function(){return n},n}function j(){var n=Object(d.a)(['\n  font-size: 1em;\n  font: 14px/22px "Lato", Arial, sans-serif;\n  margin: 1em;\n  padding: 0.25em 1em;\n  border-radius: 5px;\n  border: 2px solid;\n  color: white;\n  background: black;\n  float: center;\n  &:hover '," {\n    color: PowderBlue;\n  }\n"]);return j=function(){return n},n}function h(){var n=Object(d.a)(["\n  display: inline-block;\n  align-items: center;\n  text-align: center;\n"]);return h=function(){return n},n}function x(){var n=Object(d.a)(["\nposition: relative;\nmargin-top: 4em;\nmargin-left: 37%;\npadding: 1em 2em;\nalign-items: center;\ndisplay: block;\n"]);return x=function(){return n},n}var g=b.a.div(x()),m=b.a.form(h()),O=b.a.button(j(),O),v=b.a.input(f()),w=b.a.h2(p()),k=function(n){var e=n.login,t=Object(a.useState)(""),o=Object(l.a)(t,2),c=o[0],i=o[1],u=Object(a.useState)(""),s=Object(l.a)(u,2),d=s[0],b=s[1];return Object(r.jsx)(g,{children:Object(r.jsxs)(m,{children:[Object(r.jsx)(w,{children:"Sign in!"}),Object(r.jsx)("div",{children:Object(r.jsx)(v,{value:c,onChange:function(n){i(n.target.value)},placeholder:"username"})}),Object(r.jsx)("div",{children:Object(r.jsx)(v,{type:"password",value:d,onChange:function(n){b(n.target.value)},placeholder:"password"})}),Object(r.jsx)(O,{onClick:function(n){n.preventDefault(),e(c,d)},type:"submit",children:"Login"}),Object(r.jsx)("div",{children:Object(r.jsx)("a",{href:"/#/signup",children:"No account? Sign up!"})})]})})};function y(){var n=Object(d.a)(['\n  font: "Lato", Arial, sans-serif;\n  float: center;\n']);return y=function(){return n},n}function S(){var n=Object(d.a)(["\n  padding: 0.5em;\n  margin: 0.5em;\n  background: white;\n  border: none;\n  border-radius: 3px;\n  box-shadow: inset 0 0 1.7px;\n"]);return S=function(){return n},n}function A(){var n=Object(d.a)(['\n  font-size: 1em;\n  font: 14px/22px "Lato", Arial, sans-serif;\n  margin: 1em;\n  padding: 0.25em 1em;\n  border-radius: 5px;\n  border: 2px solid;\n  color: white;\n  background: black;\n  float: center;\n  &:hover '," {\n    color: PowderBlue;\n  }\n"]);return A=function(){return n},n}function C(){var n=Object(d.a)(["\n  display: inline-block;\n  align-items: center;\n  text-align: center;\n"]);return C=function(){return n},n}function B(){var n=Object(d.a)(["\nposition: relative;\nmargin-top: 4em;\nmargin-left: 37%;\npadding: 1em 2em;\nalign-items: center;\ndisplay: block;\n"]);return B=function(){return n},n}var L=b.a.div(B()),z=b.a.form(C()),P=b.a.button(A(),P),T=b.a.input(S()),D=b.a.h2(y()),N=function(n){var e=n.register,t=Object(a.useState)(""),o=Object(l.a)(t,2),c=o[0],i=o[1],u=Object(a.useState)(""),s=Object(l.a)(u,2),d=s[0],b=s[1],p=Object(a.useState)(""),f=Object(l.a)(p,2),j=f[0],h=f[1];return Object(r.jsx)("div",{children:Object(r.jsx)(L,{children:Object(r.jsxs)(z,{children:[Object(r.jsx)(D,{children:"Create an account!"}),Object(r.jsx)("div",{children:Object(r.jsx)(T,{value:c,onChange:function(n){i(n.target.value)},placeholder:"username"})}),Object(r.jsx)("div",{children:Object(r.jsx)(T,{type:"password",value:d,onChange:function(n){b(n.target.value)},placeholder:"password"})}),Object(r.jsx)("div",{children:Object(r.jsx)(T,{type:"password",value:j,onChange:function(n){h(n.target.value)},placeholder:"repeat password"})}),Object(r.jsx)(P,{onClick:function(n){n.preventDefault(),e({username:c,password1:d,password2:j})},type:"submit",children:"Sign up"})]})})})},E=(t(45),t(15));function I(){var n=Object(d.a)(["\n  width: 100%;\n  background: black;\n  padding: 0.75em;\n  box-shadow: 0px 0px 6px;\n"]);return I=function(){return n},n}function U(){var n=Object(d.a)(['\n  padding: 0.25em;\n  position: absolute;\n  font: 14px/22px "Lato", Arial, sans-serif;\n  right: 1em;\n  font-size: 1em;\n  color: white;\n  font-weight: bold;\n  &:hover '," {\n    color: PowderBlue;\n  };\n"]);return U=function(){return n},n}function J(){var n=Object(d.a)(["\n  padding: 0.25em;\n  color: white;\n  &:hover "," {\n    color: PowderBlue;\n  };\n"]);return J=function(){return n},n}var W=Object(b.a)(E.b)(J(),W),G=Object(b.a)(E.b)(U(),G),H=b.a.div(I()),M=function(n){var e=n.user,t=n.logOut;return Object(r.jsxs)(H,{children:[Object(r.jsxs)(W,{to:"/",children:[" ",Object(r.jsx)("i",{className:"big white home icon"})," "]}),e?Object(r.jsx)(G,{onClick:t,to:"/#",children:Object(r.jsx)("i",{className:"big white sign-out icon"})}):Object(r.jsx)(G,{to:"/login",children:Object(r.jsx)("i",{className:"big white sign-in icon"})})]})},R=t(13),V=t.n(R),q="/api/messages",F=null,K={getAll:function(){return V.a.get(q).then((function(n){return n.data}))},send:function(){var n=Object(s.a)(u.a.mark((function n(e){var t,r;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t={headers:{Authorization:F}},n.next=3,V.a.post(q,e,t);case 3:return r=n.sent,n.abrupt("return",r.data);case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),remove:function(){var n=Object(s.a)(u.a.mark((function n(e){var t;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t={headers:{Authorization:F}},n.next=3,V.a.delete("".concat(q,"/").concat(e),t);case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),setToken:function(n){F="bearer ".concat(n)}},Q=t(37),X=t.n(Q);function Y(){var n=Object(d.a)(['\n  width: 25em;\n  border: none;\n  padding: 10px 20px;\n  font: 14px/22px "Lato", Arial, sans-serif;\n  margin-bottom: 10px;\n  border-radius: 5px;\n  box-shadow: 0 5px 5px -5px;\n  resize: none;\n  background: PowderBlue;\n']);return Y=function(){return n},n}function Z(){var n=Object(d.a)(["\n  width: 0; \n  height: 0;\n  margin-left: 5%;\n  border-left: 10px solid transparent;\n  border-right: 10px solid transparent;\n  border-bottom: 10px solid PowderBlue;\n"]);return Z=function(){return n},n}function $(){var n=Object(d.a)(["\n  margin-bottom: 1em;\n"]);return $=function(){return n},n}function _(){var n=Object(d.a)(["\n  float: right;\n"]);return _=function(){return n},n}function nn(){var n=Object(d.a)(['\n  color: Black;\n  font: 14px "Lato", Arial, sans-serif;\n']);return nn=function(){return n},n}function en(){var n=Object(d.a)(["\n  margin-bottom: 0.25em;\n  width: 25em;\n  padding-left: 10px;\n  padding-right: 30px;\n"]);return en=function(){return n},n}var tn=b.a.div(en()),rn=b.a.span(nn()),an=b.a.p(_()),on=b.a.div($()),cn=b.a.div(Z()),un=b.a.div(Y()),sn=function(n){var e=n.date,t=n.content,a=n.user,o="anonymous";return a&&null!=a&&(o=a.username),Object(r.jsxs)("div",{children:[Object(r.jsx)(tn,{children:Object(r.jsxs)(rn,{children:[o,Object(r.jsx)(an,{children:X()(e).format("lll")})]})}),Object(r.jsxs)(on,{children:[Object(r.jsx)(cn,{}),Object(r.jsx)(un,{children:t})]})]})};function ln(){var n=Object(d.a)(["\n  height: 4.5em;\n  color: Black;\n  background: PowderBlue;;\n  font-size: 1em;\n  padding: 1em;\n  border: none;\n  border-radius: 5px;\n  &:hover "," {\n    background: DarkCyan;\n  }\n  }\n"]);return ln=function(){return n},n}function dn(){var n=Object(d.a)(['\n  width: 21em;\n  min-height: 4.5em;\n  border: none;\n  padding: 10px 20px;\n  font: 14px/22px "Lato", Arial, sans-serif;\n  margin-bottom: 10px;\n  border-radius: 5px;\n  resize: none;\n  box-shadow: inset 0 0 1.7px;\n']);return dn=function(){return n},n}function bn(){var n=Object(d.a)(["\n  width: 25em;\n  position: absolute;\n  bottom: 0.5em;\n  display:inline-flex;\n"]);return bn=function(){return n},n}function pn(){var n=Object(d.a)(["\n  overflow-y: scroll;\n  width: 27em;\n  height: 33em;\n  padding-bottom: 2em;\n  padding-right: 1.5em;\n"]);return pn=function(){return n},n}function fn(){var n=Object(d.a)(["\n  background: White;\n  width: 30em;\n  height: 38em;\n  position: relative;\n  margin-top: 4em;\n  margin-left: auto;\n  margin-right: auto;\n  margin-bottom: 5em;\n  padding: 1em 2em;\n  align-items: center;\n  display: block;\n  border: 1.5px solid Grey;\n  border-radius: 5px;\n"]);return fn=function(){return n},n}var jn=b.a.div(fn()),hn=b.a.div(pn()),xn=b.a.span(bn()),gn=b.a.textarea(dn()),mn=b.a.button(ln(),mn),On=function(n){var e=n.user,t=Object(a.useState)([]),o=Object(l.a)(t,2),c=o[0],i=o[1],u=Object(a.useState)(""),s=Object(l.a)(u,2),d=s[0],b=s[1],p=Object(a.useRef)(null);Object(a.useEffect)((function(){K.getAll().then((function(n){return i(n)}))}),[]),Object(a.useEffect)((function(){!function(){var n;null===(n=p.current)||void 0===n||n.scrollIntoView({behavior:"smooth"})}()}),[c]);return Object(r.jsx)("div",{children:Object(r.jsxs)(jn,{children:[Object(r.jsxs)(hn,{children:[c.map((function(n){return Object(r.jsx)("div",{children:Object(r.jsx)(sn,{date:n.date,user:n.user,content:n.content})},n.id)})),Object(r.jsx)("div",{ref:p})]}),Object(r.jsxs)(xn,{children:[Object(r.jsx)(gn,{value:d,onChange:function(n){b(n.target.value)}}),Object(r.jsx)(mn,{onClick:function(){var n=null;d&&null!=d&&d.replace(/\s/g,"").length>0&&(n=null===e?{content:d,date:Date.now(),user:null}:{content:d,date:Date.now(),user:e},K.send(n),i(c.concat(n))),b("")},children:"Send"})]})]})})};function vn(){var n=Object(d.a)(['\n  border: 1px solid DarkCyan;\n  background-color: PowderBlue;\n  color: Black;\n  font: 14px/22px "Lato", Arial, sans-serif;\n  transition:0.5s;\n  cursor:pointer;\n  padding: 0.25em\n']);return vn=function(){return n},n}var wn=b.a.div(vn()),kn=function(n){var e=n.message;return null!==e?Object(r.jsx)(wn,{children:e}):null},yn={login:function(){var n=Object(s.a)(u.a.mark((function n(e){var t;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,V.a.post("/api/login",e);case 2:return t=n.sent,n.abrupt("return",t.data);case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},Sn="/api/users",An={getAll:function(){return V.a.get(Sn).then((function(n){return n.data}))},create:function(){var n=Object(s.a)(u.a.mark((function n(e){var t;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,V.a.post(Sn,e);case 2:return t=n.sent,n.abrupt("return",t.data);case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},Cn=t(4);function Bn(){var n=Object(d.a)(["\n  width: 100vw;\n  min-height: 100vh;\n  background: WhiteSmoke;\n"]);return Bn=function(){return n},n}var Ln=b.a.div(Bn()),zn=function(){var n=Object(a.useState)(null),e=Object(l.a)(n,2),t=e[0],o=e[1],c=Object(a.useState)([]),i=Object(l.a)(c,2),d=i[0],b=i[1],p=Object(a.useState)(null),f=Object(l.a)(p,2),j=f[0],h=f[1],x=Object(Cn.g)();Object(a.useEffect)((function(){An.getAll().then((function(n){return b(n)}))}),[]),Object(a.useEffect)((function(){var n=window.localStorage.getItem("loggedChatAppUser");if(n){var e=JSON.parse(n);o(e),K.setToken(e.token)}}),[]);var g=function(){var n=Object(s.a)(u.a.mark((function n(e,t){var r;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,yn.login({username:e,password:t});case 3:r=n.sent,window.localStorage.setItem("loggedChatAppUser",JSON.stringify(r)),K.setToken(r.token),o(r),x.push("/"),h("Hi "+r.username+"!"),setTimeout((function(){h(null)}),5e3),n.next=16;break;case 12:n.prev=12,n.t0=n.catch(0),h("Wrong username or password"),setTimeout((function(){h(null)}),5e3);case 16:case"end":return n.stop()}}),n,null,[[0,12]])})));return function(e,t){return n.apply(this,arguments)}}(),m=function(){var n=Object(s.a)(u.a.mark((function n(){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:window.localStorage.removeItem("loggedChatAppUser"),o(null),h("Logged out!"),setTimeout((function(){h(null)}),3e3);case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),O=function(){var n=Object(s.a)(u.a.mark((function n(e){var t;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!d.map((function(n){return n.username})).includes(e.username)){n.next=5;break}h("Username is already taken"),n.next=18;break;case 5:if(!(e.username.length<3||e.password1.length<3)){n.next=9;break}h("Username and password must be at least 3 characters long"),n.next=18;break;case 9:if(e.password1===e.password2){n.next=13;break}h("Make sure password fields match!"),n.next=18;break;case 13:return setTimeout((function(){h(null)})),t={username:e.username,password:e.password1},n.next=17,An.create(t);case 17:g(t.username,t.password);case 18:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return Object(r.jsx)("div",{children:Object(r.jsxs)(Ln,{children:[Object(r.jsx)(M,{user:t,logOut:m}),Object(r.jsx)(kn,{message:j}),Object(r.jsxs)(Cn.d,{children:[Object(r.jsx)(Cn.b,{path:"/login",children:t?Object(r.jsx)(Cn.a,{to:"/"}):Object(r.jsx)(k,{login:g,register:O,users:d})}),Object(r.jsx)(Cn.b,{path:"/signup",children:t?Object(r.jsx)(Cn.a,{to:"/"}):Object(r.jsx)(N,{login:g,register:O,users:d})}),Object(r.jsx)(Cn.b,{path:"/",children:Object(r.jsx)(On,{user:t})})]})]})})};c.a.render(Object(r.jsx)(E.a,{history:history,children:Object(r.jsx)(zn,{})}),document.getElementById("root"))}},[[68,1,2]]]);
//# sourceMappingURL=main.c57b543d.chunk.js.map